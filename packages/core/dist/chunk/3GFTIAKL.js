import { b, v, a as a$2, e, j } from './CI37HP6M.js';
import { a as a$1 } from './Y2RMDDRY.js';
import { a } from './BRRMFPGI.js';
import { a as a$3 } from './2B777EKY.js';
import { createComponent, mergeProps, isServer } from 'solid-js/web';
import { mergeDefaultProps, createGenerateId, contains, mergeRefs } from '@kobalte/utils';
import { splitProps, createUniqueId, createSignal, createMemo, createEffect, onCleanup } from 'solid-js';

function E(u){let a=b(),d=mergeDefaultProps({modal:!1},u),[m,t]=splitProps(d,["value"]),f=createUniqueId(),o=a.generateId(`menubar-menu-${f}`),r=mergeDefaultProps({id:o},t);return createComponent(v,mergeProps({get value(){return m.value??f}},r))}function Me(u){let a$4,d=`menubar-${createUniqueId()}`,m=mergeDefaultProps({id:d,loop:!0,orientation:"horizontal"},u),[t,f]=splitProps(m,["ref","value","defaultValue","onValueChange","loop","focusOnAlt","autoFocusMenu","onAutoFocusMenuChange","orientation"]),[o,r]=a({value:()=>t.value,defaultValue:()=>t.defaultValue,onChange:e=>t.onValueChange?.(e)}),[q,w]=createSignal(),[s,b]=createSignal(new Map),[I,g]=a({value:()=>t.autoFocusMenu,defaultValue:()=>!1,onChange:t.onAutoFocusMenuChange}),P=()=>o()&&I()&&!o()?.includes("link-trigger-"),i={dataset:createMemo(()=>({"data-expanded":P()?"":void 0,"data-closed":P()?void 0:""})),value:o,setValue:r,lastValue:q,setLastValue:w,menus:()=>new Set([...s().keys()]),menuRefs:()=>[...s().values()].flat(),menuRefMap:()=>s(),registerMenu:(e,n)=>{b(l=>{let c=new Map;return l.forEach((v,L)=>c.set(L,v)),c.set(e,n),c});},unregisterMenu:e=>{b(n=>{n.delete(e);let l=new Map;return n.forEach((c,v)=>l.set(v,c)),l});},nextMenu:()=>{let e=[...s().keys()];if(o()==null){r(e[0]);return}let n=e.indexOf(o());if(n===e.length-1){t.loop&&r(e[0]);return}r(e[n+1]);},previousMenu:()=>{let e=[...s().keys()];if(o()==null){r(e[0]);return}let n=e.indexOf(o());if(n===0){t.loop&&r(e[e.length-1]);return}r(e[n-1]);},closeMenu:()=>{g(!1),r(void 0);},autoFocusMenu:()=>I(),setAutoFocusMenu:g,generateId:createGenerateId(()=>f.id),orientation:()=>t.orientation};createEffect(()=>{o()==null&&g(!1);}),a$1({onInteractOutside:()=>{i.closeMenu(),setTimeout(()=>i.closeMenu());},shouldExcludeElement:e=>[a$4,...s().values()].flat().some(n=>contains(n,e))},()=>a$4);let M=e=>{e.key==="Alt"&&(e.preventDefault(),e.stopPropagation(),i.value()===void 0?i.nextMenu():i.closeMenu());};return createEffect(()=>{isServer||(t.focusOnAlt?window.addEventListener("keydown",M):window.removeEventListener("keydown",M),onCleanup(()=>{window.removeEventListener("keydown",M);}));}),createEffect(()=>{o()!=null&&w(o());}),createComponent(a$2.Provider,{value:i,get children(){return createComponent(a$3,mergeProps({as:"div",ref(e){let n=mergeRefs(l=>a$4=l,t.ref);typeof n=="function"&&n(e);},role:"menubar",get"data-orientation"(){return t.orientation},get"aria-orientation"(){return t.orientation}},f))}})}function Pe(u){let a=b();if(e()===void 0&&Object.hasOwn(u,"href")){let m=a.generateId("link-trigger-")+createUniqueId();return createComponent(E,{value:m,get children(){return createComponent(j,u)}})}return j(u)}

export { E as a, Me as b, Pe as c };
