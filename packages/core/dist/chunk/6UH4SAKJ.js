import { a as a$5 } from './GGX2XJIV.js';
import { b, c as c$2, d, e as e$1, g, f as f$1 } from './QRPJCKPG.js';
import { c as c$1, f } from './U4KVQHPL.js';
import { a as a$e } from './GDC443NN.js';
import { d as d$2, i, a as a$d } from './K4TV2NLR.js';
import { a as a$3 } from './ZMT4QDL4.js';
import { a as a$2 } from './VRFMVH72.js';
import { a as a$4 } from './FNVJ2A2S.js';
import { a as a$b } from './B6YIKRNF.js';
import { a as a$8, b as b$1 } from './UQYWIS72.js';
import { a as a$7 } from './PXHAVOZL.js';
import { a as a$c } from './3USQYRTZ.js';
import { a as a$1 } from './DBH56JRW.js';
import { e, d as d$1, a as a$a, b as b$2, c as c$3 } from './63IHFG6C.js';
import { h } from './UAI26547.js';
import { a as a$f } from './3LFQJS72.js';
import { a as a$9 } from './STCLCRSQ.js';
import { a as a$6 } from './2B777EKY.js';
import { a } from './JSKF3YHK.js';
import { createComponent, mergeProps, memo, Portal } from 'solid-js/web';
import { focusWithoutScrolling, mergeRefs, mergeDefaultProps, callHandler, isFunction, access, createGenerateId } from '@kobalte/utils';
import { createContext, useContext, splitProps, Show, createEffect, onCleanup, createMemo, children, createUniqueId, createSignal, on } from 'solid-js';
import { combineStyle } from '@solid-primitives/props';
import rt from 'solid-prevent-scroll';
import It from 'solid-presence';

var Zt={};a(Zt,{Arrow:()=>c$1,Content:()=>J,Description:()=>e,ErrorMessage:()=>a$1,HiddenSelect:()=>Q,Icon:()=>X,Item:()=>b,ItemDescription:()=>c$2,ItemIndicator:()=>d,ItemLabel:()=>e$1,Label:()=>Y,Listbox:()=>Z,Portal:()=>ee,Root:()=>te,Section:()=>g,Select:()=>Yt,Trigger:()=>oe,Value:()=>ne,useSelectContext:()=>c});var j=createContext();function c(){let s=useContext(j);if(s===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return s}function J(s){let o,e=c(),[t,i]=splitProps(s,["ref","style","onCloseAutoFocus","onFocusOutside"]),d=n=>{e.close();},a=n=>{t.onFocusOutside?.(n),e.isOpen()&&e.isModal()&&n.preventDefault();};return a$2({isDisabled:()=>!(e.isOpen()&&e.isModal()),targets:()=>o?[o]:[]}),rt({element:()=>o??null,enabled:()=>e.contentPresent()&&e.preventScroll()}),a$3({trapFocus:()=>e.isOpen()&&e.isModal(),onMountAutoFocus:n=>{n.preventDefault();},onUnmountAutoFocus:n=>{t.onCloseAutoFocus?.(n),n.defaultPrevented||(focusWithoutScrolling(e.triggerRef()),n.preventDefault());}},()=>o),createComponent(Show,{get when(){return e.contentPresent()},get children(){return createComponent(f.Positioner,{get children(){return createComponent(a$4,mergeProps({ref(n){let p=mergeRefs(S=>{e.setContentRef(S),o=S;},t.ref);typeof p=="function"&&p(n);},get disableOutsidePointerEvents(){return memo(()=>!!e.isModal())()&&e.isOpen()},get excludedElements(){return [e.triggerRef]},get style(){return combineStyle({"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},t.style)},onEscapeKeyDown:d,onFocusOutside:a,get onDismiss(){return e.close}},()=>e.dataset(),i))}})}})}function Q(s){let o=c();return createComponent(a$5,mergeProps({get collection(){return o.listState().collection()},get selectionManager(){return o.listState().selectionManager()},get isOpen(){return o.isOpen()},get isMultiple(){return o.isMultiple()},get isVirtualized(){return o.isVirtualized()},focusTrigger:()=>o.triggerRef()?.focus()},s))}function X(s){let o=c(),e=mergeDefaultProps({children:"\u25BC"},s);return createComponent(a$6,mergeProps({as:"span","aria-hidden":"true"},()=>o.dataset(),e))}function Y(s){let o=c(),[e,t]=splitProps(s,["onClick"]);return createComponent(a$7,mergeProps({as:"span",onClick:d=>{callHandler(d,e.onClick),o.isDisabled()||o.triggerRef()?.focus();}},t))}function Z(s){let o=c(),e=mergeDefaultProps({id:o.generateId("listbox")},s),[t,i]=splitProps(e,["ref","id","onKeyDown"]);return createEffect(()=>onCleanup(o.registerListboxId(t.id))),createComponent(f$1,mergeProps({ref(a){let n=mergeRefs(o.setListboxRef,t.ref);typeof n=="function"&&n(a);},get id(){return t.id},get state(){return o.listState()},get virtualized(){return o.isVirtualized()},get autoFocus(){return o.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return o.shouldFocusWrap()},get disallowTypeAhead(){return o.disallowTypeAhead()},get"aria-labelledby"(){return o.listboxAriaLabelledBy()},get renderItem(){return o.renderItem},get renderSection(){return o.renderSection},onKeyDown:a=>{callHandler(a,t.onKeyDown),a.key==="Escape"&&a.preventDefault();}},i))}function ee(s){let o=c();return createComponent(Show,{get when(){return o.contentPresent()},get children(){return createComponent(Portal,s)}})}function Ie(s){let o=`select-${createUniqueId()}`,e=mergeDefaultProps({id:o,selectionMode:"single",disallowEmptySelection:!1,closeOnSelection:s.selectionMode==="single",allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1},s),[t,i$1,d,a]=splitProps(e,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","closeOnSelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],a$a),[n,p]=createSignal(),[S,f$1]=createSignal(),[I,V]=createSignal(),[v,R]=createSignal(),[F,_]=createSignal(),[k,l]=createSignal(),[g,y]=createSignal(),[_e,ke]=createSignal(!0),x=r=>{let u=t.optionValue;return u==null?String(r):String(isFunction(u)?u(r):r[u])},le=createMemo(()=>{let r=t.optionGroupChildren;return r==null?t.options:t.options.flatMap(u=>u[r]??u)}),Te=createMemo(()=>le().map(r=>x(r))),se=r=>[...r].map(u=>le().find($=>x($)===u)).filter(u=>u!=null),h$1=a$b({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:r=>t.onOpenChange?.(r)}),m=i({selectedKeys:()=>t.value!=null?t.value.map(x):t.value,defaultSelectedKeys:()=>t.defaultValue!=null?t.defaultValue.map(x):t.defaultValue,onSelectionChange:r=>{t.onChange?.(se(r)),t.closeOnSelection&&T();},allowDuplicateSelectionEvents:()=>access(t.allowDuplicateSelectionEvents),disallowEmptySelection:()=>access(t.disallowEmptySelection),selectionBehavior:()=>access(t.selectionBehavior),selectionMode:()=>t.selectionMode,dataSource:()=>t.options??[],getKey:()=>t.optionValue,getTextValue:()=>t.optionTextValue,getDisabled:()=>t.optionDisabled,getSectionChildren:()=>t.optionGroupChildren}),Ee=createMemo(()=>se(m.selectionManager().selectedKeys())),$e=r=>{m.selectionManager().toggleSelection(x(r));},{present:Be}=It({show:()=>t.forceMount||h$1.isOpen(),element:()=>F()??null}),Ae=()=>{let r=k();r&&focusWithoutScrolling(r);},ie=r=>{if(t.options.length<=0)return;ke(r),h$1.open();let u=m.selectionManager().firstSelectedKey();u==null&&(r==="first"?u=m.collection().getFirstKey():r==="last"&&(u=m.collection().getLastKey())),Ae(),m.selectionManager().setFocused(!0),m.selectionManager().setFocusedKey(u);},T=()=>{h$1.close(),m.selectionManager().setFocused(!1),m.selectionManager().setFocusedKey(void 0);},He=r=>{h$1.isOpen()?T():ie(r);},{formControlContext:E}=b$2(d);a$c(v,()=>{let r=t.defaultValue?[...t.defaultValue].map(x):new a$d;m.selectionManager().setSelectedKeys(r);});let We=h({usage:"search",sensitivity:"base"}),ze=createMemo(()=>{let r=access(t.keyboardDelegate);return r||new a$e(m.collection,void 0,We)}),Ge=r=>t.itemComponent?.({item:r}),Ne=r=>t.sectionComponent?.({section:r});createEffect(on([Te],([r])=>{let $=[...m.selectionManager().selectedKeys()].filter(Ue=>r.includes(Ue));m.selectionManager().setSelectedKeys($);},{defer:!0}));let ae=createMemo(()=>({"data-expanded":h$1.isOpen()?"":void 0,"data-closed":h$1.isOpen()?void 0:""})),ce={dataset:ae,isOpen:h$1.isOpen,isDisabled:()=>E.isDisabled()??!1,isMultiple:()=>access(t.selectionMode)==="multiple",isVirtualized:()=>t.virtualized??!1,isModal:()=>t.modal??!1,preventScroll:()=>t.preventScroll??ce.isModal(),disallowTypeAhead:()=>t.disallowTypeAhead??!1,shouldFocusWrap:()=>t.shouldFocusWrap??!1,selectedOptions:Ee,contentPresent:Be,autoFocus:_e,triggerRef:v,listState:()=>m,keyboardDelegate:ze,triggerId:n,valueId:S,listboxId:I,listboxAriaLabelledBy:g,setListboxAriaLabelledBy:y,setTriggerRef:R,setContentRef:_,setListboxRef:l,open:ie,close:T,toggle:He,placeholder:()=>t.placeholder,renderItem:Ge,renderSection:Ne,removeOptionFromSelection:$e,generateId:createGenerateId(()=>access(d.id)),registerTriggerId:a$f(p),registerValueId:a$f(f$1),registerListboxId:a$f(V)};return createComponent(c$3.Provider,{value:E,get children(){return createComponent(j.Provider,{value:ce,get children(){return createComponent(f,mergeProps({anchorRef:v,contentRef:F},i$1,{get children(){return createComponent(a$6,mergeProps({as:"div",role:"group",get id(){return access(d.id)}},()=>E.dataset(),ae,a))}}))}})}})}function te(s){let[o,e]=splitProps(s,["value","defaultValue","onChange","multiple"]),t=createMemo(()=>o.value!=null?o.multiple?o.value:[o.value]:o.value),i=createMemo(()=>o.defaultValue!=null?o.multiple?o.defaultValue:[o.defaultValue]:o.defaultValue);return createComponent(Ie,mergeProps({get value(){return t()},get defaultValue(){return i()},onChange:a=>{o.multiple?o.onChange?.(a??[]):o.onChange?.(a[0]??null);},get selectionMode(){return o.multiple?"multiple":"single"}},e))}function oe(s){let o=d$1(),e=c(),t=mergeDefaultProps({id:e.generateId("trigger")},s),[i,d,a]=splitProps(t,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],a$8),n=()=>e.listState().selectionManager(),p=()=>e.keyboardDelegate(),S=()=>i.disabled||e.isDisabled(),{fieldProps:f}=b$1(d),{typeSelectHandlers:I}=d$2({keyboardDelegate:p,selectionManager:n,onTypeSelect:l=>n().select(l)}),V=()=>[e.listboxAriaLabelledBy(),e.valueId()].filter(Boolean).join(" ")||void 0,v=l=>{callHandler(l,i.onPointerDown),l.currentTarget.dataset.pointerType=l.pointerType,!S()&&l.pointerType!=="touch"&&l.button===0&&(l.preventDefault(),e.toggle(!0));},R=l=>{callHandler(l,i.onClick),!S()&&l.currentTarget.dataset.pointerType==="touch"&&e.toggle(!0);},F=l=>{if(callHandler(l,i.onKeyDown),!S())switch(callHandler(l,I.onKeyDown),l.key){case"Enter":case" ":case"ArrowDown":l.stopPropagation(),l.preventDefault(),e.toggle("first");break;case"ArrowUp":l.stopPropagation(),l.preventDefault(),e.toggle("last");break;case"ArrowLeft":{if(l.preventDefault(),e.isMultiple())return;let g=n().firstSelectedKey(),y=g!=null?p().getKeyAbove?.(g):p().getFirstKey?.();y!=null&&n().select(y);break}case"ArrowRight":{if(l.preventDefault(),e.isMultiple())return;let g=n().firstSelectedKey(),y=g!=null?p().getKeyBelow?.(g):p().getFirstKey?.();y!=null&&n().select(y);break}}},_=l=>{callHandler(l,i.onFocus),!n().isFocused()&&n().setFocused(!0);},k=l=>{callHandler(l,i.onBlur),!e.isOpen()&&n().setFocused(!1);};return createEffect(()=>onCleanup(e.registerTriggerId(f.id()))),createEffect(()=>{e.setListboxAriaLabelledBy([f.ariaLabelledBy(),f.ariaLabel()&&!f.ariaLabelledBy()?f.id():null].filter(Boolean).join(" ")||void 0);}),createComponent(a$9,mergeProps({ref(l){let g=mergeRefs(e.setTriggerRef,i.ref);typeof g=="function"&&g(l);},get id(){return f.id()},get disabled(){return S()},"aria-haspopup":"listbox",get"aria-expanded"(){return e.isOpen()},get"aria-controls"(){return memo(()=>!!e.isOpen())()?e.listboxId():void 0},get"aria-label"(){return f.ariaLabel()},get"aria-labelledby"(){return V()},get"aria-describedby"(){return f.ariaDescribedBy()},onPointerDown:v,onClick:R,onKeyDown:F,onFocus:_,onBlur:k},()=>e.dataset(),()=>o.dataset(),a))}function ne(s){let o=d$1(),e=c(),t=mergeDefaultProps({id:e.generateId("value")},s),[i,d]=splitProps(t,["id","children"]),a=()=>e.listState().selectionManager(),n=()=>{let p=a().selectedKeys();return p.size===1&&p.has("")?!0:a().isEmpty()};return createEffect(()=>onCleanup(e.registerValueId(i.id))),createComponent(a$6,mergeProps({as:"span",get id(){return i.id},get"data-placeholder-shown"(){return n()?"":void 0}},()=>o.dataset(),d,{get children(){return createComponent(Show,{get when(){return !n()},get fallback(){return e.placeholder()},get children(){return createComponent(Xt,{state:{selectedOption:()=>e.selectedOptions()[0],selectedOptions:()=>e.selectedOptions(),remove:p=>e.removeOptionFromSelection(p),clear:()=>a().clearSelection()},get children(){return i.children}})}})}}))}function Xt(s){let o=children(()=>{let e=s.children;return isFunction(e)?e(s.state):e});return memo(o)}var Yt=Object.assign(te,{Arrow:c$1,Content:J,Description:e,ErrorMessage:a$1,HiddenSelect:Q,Icon:X,Item:b,ItemDescription:c$2,ItemIndicator:d,ItemLabel:e$1,Label:Y,Listbox:Z,Portal:ee,Section:g,Trigger:oe,Value:ne});

export { c as a, J as b, Q as c, X as d, Y as e, Z as f, ee as g, te as h, oe as i, ne as j, Yt as k, Zt as l };
