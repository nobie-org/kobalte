import{a as Y}from"./UBMIWLLX.jsx";import{a as J,b as U}from"./YU3BENDD.jsx";import{a as O}from"./MYEAQNC4.jsx";import{a as W}from"./RQL65DCQ.jsx";import{a as E}from"./27VXZQWW.jsx";import{a as q,b as X,c as _,d as f,e as I}from"./HIUHMFLS.jsx";import{g as j}from"./ZSYY5OQU.jsx";import{a as k}from"./A5YUKSV6.jsx";import{a as G}from"./3BC6LDRX.jsx";import{a as T}from"./HAEWETXL.jsx";import{a as ae}from"./XWCF3RNR.jsx";var Le={};ae(Le,{DecrementTrigger:()=>M,Description:()=>I,ErrorMessage:()=>E,HiddenInput:()=>v,IncrementTrigger:()=>H,Input:()=>L,Label:()=>O,NumberField:()=>He,Root:()=>D,useNumberFieldContext:()=>d});import{callHandler as ue}from"@kobalte/utils";import{splitProps as de}from"solid-js";import{createContext as se,useContext as pe}from"solid-js";var h=se();function d(){let n=pe(h);if(n===void 0)throw new Error("[kobalte]: `useNumberFieldContext` must be used within a `NumberField` component");return n}function C(n){let o=f(),e=d(),[m,r]=de(n,["numberFieldVaryType","onClick"]);return<G tabIndex={-1}disabled={o.isDisabled()||e.rawValue()===(m.numberFieldVaryType==="increment"?e.maxValue():e.minValue())}aria-controls={o.fieldId()}onClick={s=>{ue(s,m.onClick),e.varyValue(e.step()*(m.numberFieldVaryType==="increment"?1:-1)),e.inputRef()?.focus()}}{...r}/>}function M(n){return<C numberFieldVaryType="decrement"{...n}/>}import{callHandler as be,mergeRefs as ce,visuallyHiddenStyles as ge}from"@kobalte/utils";import{batch as fe,splitProps as Ne}from"solid-js";function v(n){let o=d(),[e,m]=Ne(n,["ref","onChange"]),r=f();return<div style={ge}aria-hidden="true"><input ref={ce(o.setHiddenInputRef,e.ref)}type="text"tabIndex={-1}style={{"font-size":"16px"}}name={r.name()}value={Number.isNaN(o.rawValue())?"":o.rawValue()}required={r.isRequired()}disabled={r.isDisabled()}readOnly={r.isReadOnly()}onChange={s=>{be(s,e.onChange),fe(()=>{o.setValue(s.target.value),o.format()})}}{...m}/></div>}function H(n){return<C numberFieldVaryType="increment"{...n}/>}import{callHandler as $,composeEventHandlers as Fe,mergeDefaultProps as Pe,mergeRefs as ye}from"@kobalte/utils";import{splitProps as Te}from"solid-js";function L(n){let o=f(),e=d(),m=Pe({id:e.generateId("input"),inputMode:"decimal",autocomplete:"off",autocorrect:"off",spellcheck:!1},n),[r,s,b]=Te(m,["ref","onInput","onChange","onWheel","as"],J),{fieldProps:u}=U(s);return<Y type="text"id={u.id()}ref={ye(e.setInputRef,r.ref)}value={e.value()}validationState={o.validationState()}required={o.isRequired()}disabled={o.isDisabled()}readOnly={o.isReadOnly()}textValue={e.textValue()}minValue={e.minValue()}maxValue={e.maxValue()}onIncrement={()=>{e.varyValue(e.step())}}onIncrementPage={()=>{e.varyValue(e.largeStep())}}onIncrementToMax={()=>{e.setValue(e.maxValue()),e.format()}}onDecrement={()=>{e.varyValue(-e.step())}}onDecrementPage={()=>{e.varyValue(-e.largeStep())}}onDecrementToMin={()=>{e.setValue(e.minValue()),e.format()}}translations={e.translations()}onChange={a=>{$(a,r.onChange),e.format()}}onWheel={a=>{$(a,r.onWheel),!(!e.changeOnWheel()||document.activeElement!==e.inputRef())&&(a.preventDefault(),a.deltaY<0?e.varyValue(e.step()):e.varyValue(-e.step()))}}onInput={Fe([r.onInput,e.onInput])}aria-label={u.ariaLabel()}aria-labelledby={u.ariaLabelledBy()}aria-describedby={u.ariaDescribedBy()}{...o.dataset()}as={a=><T as={r.as||"input"}value={Number.isNaN(e.rawValue())||e.value()===void 0?"":e.formatNumber(e.rawValue())}required={o.isRequired()}disabled={o.isDisabled()}readOnly={o.isReadOnly()}{...a}{...b}/>}/>}import{access as K,createGenerateId as Ce,getPrecision as Q,mergeDefaultProps as Ve,mergeRefs as xe,snapValueToStep as Z}from"@kobalte/utils";import{batch as ee,createEffect as Re,createMemo as re,createSignal as te,createUniqueId as Ie,on as Ee,splitProps as Oe}from"solid-js";import{NumberFormatter as he,NumberParser as Me}from"@internationalized/number";function D(n){let o,e=`NumberField-${Ie()}`,m=Ve({id:e,format:!0,minValue:Number.MIN_SAFE_INTEGER,maxValue:Number.MAX_SAFE_INTEGER,step:1,changeOnWheel:!0},n),[r,s,b]=Oe(m,["ref","value","defaultValue","onChange","rawValue","onRawValueChange","translations","format","formatOptions","textValue","minValue","maxValue","step","largeStep","changeOnWheel","translations","allowedInput"],q),{locale:u}=j(),a=re(()=>new Me(u(),r.formatOptions)),S=re(()=>new he(u(),r.formatOptions)),w=t=>r.format?S().format(t):t.toString(),V=t=>r.format&&typeof t!="number"?a().parse(t??""):Number(t??""),oe=t=>r.format&&typeof t!="number"?a().isValidPartialNumber(t??"",m.minValue,m.maxValue):!Number.isNaN(Number(t)),[c,N]=k({value:()=>r.value,defaultValue:()=>r.defaultValue??r.rawValue,onChange:t=>{r.onChange?.(typeof t=="number"?w(t):t),r.onRawValueChange?.(V(t))}});c()!==void 0&&r.onRawValueChange?.(V(c()));function ne(t){return r.allowedInput!==void 0?r.allowedInput.test(t):!0}let{formControlContext:P}=X(s);W(()=>o,()=>{N(r.defaultValue??"")});let[x,ie]=te(),[F,me]=te(),le=t=>{if(P.isReadOnly()||P.isDisabled())return;let i=t.target,p=i.selectionStart;oe(i.value)?(t.inputType!=="insertText"||ne(t.data||""))&&N(i.value):t.inputType==="deleteContentBackward"&&p!==null&&(p+=1);let g=c();g!==i.value&&(i.value=String(g??""),p!==null&&(i.selectionStart=p,i.selectionEnd=p))},l={value:c,setValue:N,rawValue:()=>V(c()),generateId:Ce(()=>K(s.id)),formatNumber:w,format:()=>{if(!r.format)return;let t=l.rawValue();if(Number.isNaN(t)){F()&&(F().value=""),r.onRawValueChange?.(t);return}l.minValue()&&(t=Math.max(t,l.minValue())),l.maxValue()&&(t=Math.min(t,l.maxValue()));let i=l.formatNumber(t);c()!=i&&N(i),x()&&(x().value=i),F()&&(F().value=String(t))},onInput:le,textValue:()=>r.textValue,minValue:()=>r.minValue,maxValue:()=>r.maxValue,step:()=>r.step,largeStep:()=>r.largeStep??r.step*10,changeOnWheel:()=>r.changeOnWheel,translations:()=>r.translations,inputRef:x,setInputRef:ie,hiddenInputRef:F,setHiddenInputRef:me,varyValue:t=>{let i=l.rawValue()??0;Number.isNaN(i)&&(i=0),ee(()=>{let p=i,g=t>0?"+":"-",R=Math.abs(t),B=n.minValue===void 0?Number.NaN:l.minValue(),A=n.maxValue===void 0?Number.NaN:l.maxValue();p=Z(i,B,A,R),g==="+"&&p>i||g==="-"&&p<i||(p=Z(ve(g,i,R),B,A,R)),l.setValue(p),l.format()})}};return Re(Ee(()=>r.rawValue,t=>{if(t!==l.rawValue()){if(Number.isNaN(t))return;ee(()=>{N(t??""),l.format()})}},{defer:!0})),<_.Provider value={P}><h.Provider value={l}><T as="div"ref={xe(t=>o=t,r.ref)}role="group"id={K(s.id)}{...P.dataset()}{...b}/></h.Provider></_.Provider>}function ve(n,o,e){let m=n==="+"?o+e:o-e;if(Number.isFinite(o)&&Number.isFinite(e)&&(e%1!==0||o%1!==0)){let r=Q(e),s=Q(o),b=10**Math.max(r,s),u=Math.round(e*b),a=Math.round(o*b);m=(n==="+"?a+u:a-u)/b}return m}var He=Object.assign(D,{Description:I,ErrorMessage:E,HiddenInput:v,Input:L,IncrementTrigger:H,DecrementTrigger:M,Label:O});export{d as a,M as b,v as c,H as d,L as e,D as f,He as g,Le as h};
