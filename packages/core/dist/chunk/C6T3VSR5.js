import { c, f as f$1 } from './U4KVQHPL.js';
import { a as a$1 } from './FNVJ2A2S.js';
import { a as a$2 } from './B6YIKRNF.js';
import { a as a$3 } from './3LFQJS72.js';
import { a as a$4 } from './2B777EKY.js';
import { a } from './JSKF3YHK.js';
import { createComponent, mergeProps, Portal, isServer, memo } from 'solid-js/web';
import { mergeDefaultProps, mergeRefs, getDocument, getWindow, createGenerateId, contains, isPointInPolygon, getEventPoint, callHandler } from '@kobalte/utils';
import { createContext, useContext, splitProps, createEffect, onCleanup, Show, createUniqueId, createSignal, createMemo } from 'solid-js';
import { combineStyle } from '@solid-primitives/props';
import Ie from 'solid-presence';

var We={};a(We,{Arrow:()=>c,Content:()=>A,Portal:()=>H,Root:()=>W,Tooltip:()=>Me,Trigger:()=>j,useTooltipContext:()=>d});var _=createContext();function d(){let c=useContext(_);if(c===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return c}function A(c){let s=d(),n=mergeDefaultProps({id:s.generateId("content")},c),[p,o]=splitProps(n,["ref","style"]);return createEffect(()=>onCleanup(s.registerContentId(o.id))),createComponent(Show,{get when(){return s.contentPresent()},get children(){return createComponent(f$1.Positioner,{get children(){return createComponent(a$1,mergeProps({ref(t){let e=mergeRefs(l=>{s.setContentRef(l);},p.ref);typeof e=="function"&&e(t);},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return combineStyle({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},p.style)},onFocusOutside:t=>t.preventDefault(),onDismiss:()=>s.hideTooltip(!0)},()=>s.dataset(),o))}})}})}function H(c){let s=d();return createComponent(Show,{get when(){return s.contentPresent()},get children(){return createComponent(Portal,c)}})}function Q(c,s,n){let p=c.split("-")[0],o=s.getBoundingClientRect(),t=n.getBoundingClientRect(),e=[],l=o.left+o.width/2,u=o.top+o.height/2;switch(p){case"top":e.push([o.left,u]),e.push([t.left,t.bottom]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([o.right,u]);break;case"right":e.push([l,o.top]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([t.left,t.bottom]),e.push([l,o.bottom]);break;case"bottom":e.push([o.left,u]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([t.right,t.top]),e.push([o.right,u]);break;case"left":e.push([l,o.top]),e.push([t.right,t.top]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([l,o.bottom]);break}return e}var C={},$e=0,D=!1,f,x,b;function W(c){let s=`tooltip-${createUniqueId()}`,n=`${++$e}`,p=mergeDefaultProps({id:s,openDelay:700,closeDelay:300,skipDelayDuration:300},c),[o,t]=splitProps(p,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]),e,[l,u]=createSignal(),[g,v]=createSignal(),[y,R]=createSignal(),[S,I]=createSignal(t.placement),a=a$2({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:r=>o.onOpenChange?.(r)}),{present:$}=Ie({show:()=>o.forceMount||a.isOpen(),element:()=>y()??null}),i=()=>{C[n]=T;},h=()=>{for(let r in C)r!==n&&(C[r](!0),delete C[r]);},T=(r=!1)=>{isServer||(r||o.closeDelay&&o.closeDelay<=0?(window.clearTimeout(e),e=void 0,a.close()):e||(e=window.setTimeout(()=>{e=void 0,a.close();},o.closeDelay)),window.clearTimeout(f),f=void 0,o.skipDelayDuration&&o.skipDelayDuration>=0&&(b=window.setTimeout(()=>{window.clearTimeout(b),b=void 0;},o.skipDelayDuration)),D&&(window.clearTimeout(x),x=window.setTimeout(()=>{delete C[n],x=void 0,D=!1;},o.closeDelay)));},L=()=>{isServer||(clearTimeout(e),e=void 0,h(),i(),D=!0,a.open(),window.clearTimeout(f),f=void 0,window.clearTimeout(x),x=void 0,window.clearTimeout(b),b=void 0);},te=()=>{isServer||(h(),i(),!a.isOpen()&&!f&&!D?f=window.setTimeout(()=>{f=void 0,D=!0,L();},o.openDelay):a.isOpen()||L());},oe=(r=!1)=>{isServer||(!r&&o.openDelay&&o.openDelay>0&&!e&&!b?te():L());},ne=()=>{isServer||(window.clearTimeout(f),f=void 0,D=!1);},q=()=>{isServer||(window.clearTimeout(e),e=void 0);},G=r=>contains(g(),r)||contains(y(),r),re=r=>{let P=g(),m=y();if(!(!P||!m))return Q(r,P,m)},X=r=>{let P=r.target;if(G(P)){q();return}if(!o.ignoreSafeArea){let m=re(S());if(m&&isPointInPolygon(getEventPoint(r),m)){q();return}}e||T();};createEffect(()=>{if(isServer||!a.isOpen())return;let r=getDocument();r.addEventListener("pointermove",X,!0),onCleanup(()=>{r.removeEventListener("pointermove",X,!0);});}),createEffect(()=>{let r=g();if(!r||!a.isOpen())return;let P=se=>{let le=se.target;contains(le,r)&&T(!0);},m=getWindow();m.addEventListener("scroll",P,{capture:!0}),onCleanup(()=>{m.removeEventListener("scroll",P,{capture:!0});});}),onCleanup(()=>{clearTimeout(e),C[n]&&delete C[n];});let ie={dataset:createMemo(()=>({"data-expanded":a.isOpen()?"":void 0,"data-closed":a.isOpen()?void 0:""})),isOpen:a.isOpen,isDisabled:()=>o.disabled??!1,triggerOnFocusOnly:()=>o.triggerOnFocusOnly??!1,contentId:l,contentPresent:$,openTooltip:oe,hideTooltip:T,cancelOpening:ne,generateId:createGenerateId(()=>p.id),registerContentId:a$3(u),isTargetOnTooltip:G,setTriggerRef:v,setContentRef:R};return createComponent(_.Provider,{value:ie,get children(){return createComponent(f$1,mergeProps({anchorRef:g,contentRef:y,onCurrentPlacementChange:I},t))}})}function j(c){let s,n=d(),[p,o]=splitProps(c,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]),t=!1,e=!1,l=!1,u=()=>{t=!1;},g=()=>{!n.isOpen()&&(e||l)&&n.openTooltip(l);},v=i=>{n.isOpen()&&!e&&!l&&n.hideTooltip(i);},y=i=>{callHandler(i,p.onPointerEnter),!(i.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||i.defaultPrevented)&&(e=!0,g());},R=i=>{callHandler(i,p.onPointerLeave),i.pointerType!=="touch"&&(e=!1,l=!1,n.isOpen()?v():n.cancelOpening());},S=i=>{callHandler(i,p.onPointerDown),t=!0,getDocument(s).addEventListener("pointerup",u,{once:!0});},I=i=>{callHandler(i,p.onClick),e=!1,l=!1,v(!0);},a=i=>{callHandler(i,p.onFocus),!(n.isDisabled()||i.defaultPrevented||t)&&(l=!0,g());},$=i=>{callHandler(i,p.onBlur);let h=i.relatedTarget;n.isTargetOnTooltip(h)||(e=!1,l=!1,v(!0));};return onCleanup(()=>{isServer||getDocument(s).removeEventListener("pointerup",u);}),createComponent(a$4,mergeProps({as:"button",ref(i){let h=mergeRefs(T=>{n.setTriggerRef(T),s=T;},p.ref);typeof h=="function"&&h(i);},get"aria-describedby"(){return memo(()=>!!n.isOpen())()?n.contentId():void 0},onPointerEnter:y,onPointerLeave:R,onPointerDown:S,onClick:I,onFocus:a,onBlur:$},()=>n.dataset(),o))}var Me=Object.assign(W,{Arrow:c,Content:A,Portal:H,Trigger:j});

export { d as a, A as b, H as c, W as d, j as e, Me as f, We as g };
