import { b } from './K4TV2NLR.js';
import { d } from './63IHFG6C.js';
import { template, use, spread, mergeProps, insert, createComponent, effect, style, setAttribute } from 'solid-js/web';
import { callHandler, mergeRefs, visuallyHiddenStyles } from '@kobalte/utils';
import { splitProps, createSignal, createEffect, on, Show, For } from 'solid-js';

var I=template("<option>"),K=template('<div aria-hidden="true"><input type="text"><select tabindex="-1"><option>');function re(C){let l,[t,S]=splitProps(C,["ref","onChange","collection","selectionManager","isOpen","isMultiple","isVirtualized","focusTrigger"]),s=d(),[x,a]=createSignal(!1),c=i=>{let r=t.collection.getItem(i);return createComponent(Show,{get when(){return r?.type==="item"},get children(){let n=I();return n.value=i,insert(n,()=>r?.textValue),effect(()=>n.selected=t.selectionManager.isSelected(i)),n}})};return createEffect(on(()=>t.selectionManager.selectedKeys(),(i,r)=>{r&&b(i,r)||(a(!0),l?.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),l?.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})));},{defer:!0})),(()=>{let i=K(),r=i.firstChild,n=r.nextSibling;r.addEventListener("focus",()=>t.focusTrigger()),r.style.setProperty("font-size","16px"),n.addEventListener("change",e=>{callHandler(e,t.onChange),x()||t.selectionManager.setSelectedKeys(new Set([e.target.value])),a(!1);});let u=mergeRefs(e=>l=e,t.ref);return typeof u=="function"&&use(u,n),spread(n,mergeProps({get multiple(){return t.isMultiple},get name(){return s.name()},get required(){return s.isRequired()},get disabled(){return s.isDisabled()},get size(){return t.collection.getSize()},get value(){return t.selectionManager.firstSelectedKey()??""}},S),!1,!0),insert(n,createComponent(Show,{get when(){return t.isVirtualized},get fallback(){return createComponent(For,{get each(){return [...t.collection.getKeys()]},children:c})},get children(){return createComponent(For,{get each(){return [...t.selectionManager.selectedKeys()]},children:c})}}),null),effect(e=>{let E=visuallyHiddenStyles,d=t.selectionManager.isFocused()||t.isOpen?-1:0,m=s.isRequired(),f=s.isDisabled(),g=s.isReadOnly();return e._v$=style(i,E,e._v$),d!==e._v$2&&setAttribute(r,"tabindex",e._v$2=d),m!==e._v$3&&(r.required=e._v$3=m),f!==e._v$4&&(r.disabled=e._v$4=f),g!==e._v$5&&(r.readOnly=e._v$5=g),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),i})()}

export { re as a };
