import{access as e,createMediaQuery as X}from"@kobalte/utils";import{createEffect as I,createMemo as T,createSignal as c,mergeProps as _,on as N,onCleanup as k}from"solid-js";import{isServer as v}from"solid-js/web";var J={beforeEnter:"out",enter:"in",afterEnter:"in",beforeExit:"in",exit:"out",afterExit:"out"};function m(n){let r={"transition-duration":`${n.duration}ms`,"transition-timing-function":n.easing};return{"transition-property":O(n.transition),...r,...n.transition.common,...n.transition[J[n.phase]]}}function O(n){return[...new Set([...Object.keys(n.in),...Object.keys(n.out)])].join(", ")}var E=250,d=10,g="ease";function U(n,r){let t=_({duration:E,delay:d,easing:g,get exitDuration(){return e(r).duration||E},get exitDelay(){return e(r).delay||d},get exitEasing(){return e(r).easing||g}},r),s=X("(prefers-reduced-motion: reduce)"),[x,l]=c(s()?0:e(t).duration),[f,o]=c(e(n)?"afterEnter":"afterExit"),[A,P]=c(e(t).easing),a=-1,b=i=>{let S=i?e(t).onBeforeEnter:e(t).onBeforeExit,p=i?e(t).onAfterEnter:e(t).onAfterExit;o(i?"beforeEnter":"beforeExit"),window.clearTimeout(a);let u=l(s()?0:i?e(t).duration:e(t).exitDuration);if(P(i?e(t).easing:e(t).exitEasing),u===0){S?.(),p?.(),o(i?"afterEnter":"afterExit");return}let y=s()?0:i?e(t).delay:e(t).exitDelay,C=window.setTimeout(()=>{S?.(),o(i?"enter":"exit")},y);a=window.setTimeout(()=>{window.clearTimeout(C),p?.(),o(i?"afterEnter":"afterExit")},y+u)},D=T(()=>m({transition:e(t).transition,duration:x(),phase:f(),easing:A()})),w=T(()=>f()!=="afterExit");return I(N(()=>e(n),i=>b(i),{defer:!0})),k(()=>{v||window.clearTimeout(a)}),{keepMounted:w,style:D}}export{U as a};
