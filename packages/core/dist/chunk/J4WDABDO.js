import { a as a$2 } from './FQ5E7HJ2.js';
import { e, f, i } from './K4TV2NLR.js';
import { d, e as e$1 } from './E3ZWEEXE.js';
import { g } from './UAI26547.js';
import { a as a$3 } from './BRRMFPGI.js';
import { a as a$1 } from './2B777EKY.js';
import { a } from './JSKF3YHK.js';
import { createComponent, mergeProps, memo } from 'solid-js/web';
import { mergeRefs, composeEventHandlers, mergeDefaultProps, getFocusableTreeWalker, access, isWebKit, focusWithoutScrolling } from '@kobalte/utils';
import { createContext, useContext, createSignal, splitProps, createEffect, on, onCleanup, Show, onMount, createUniqueId, createMemo, mergeProps as mergeProps$1 } from 'solid-js';
import re from 'solid-presence';
import { combineStyle } from '@solid-primitives/props';
import { createResizeObserver } from '@solid-primitives/resize-observer';

var Oe={};a(Oe,{Content:()=>v,Indicator:()=>w,List:()=>K,Root:()=>D,Tabs:()=>Ee,Trigger:()=>$,useTabsContext:()=>S});var T=createContext();function S(){let l=useContext(T);if(l===void 0)throw new Error("[kobalte]: `useTabsContext` must be used within a `Tabs` component");return l}function v(l){let[o,n]=createSignal(),r=S(),[e,g]=splitProps(l,["ref","id","value","forceMount"]),[f,d]=createSignal(0),a=()=>e.id??r.generateContentId(e.value),i=()=>r.listState().selectedKey()===e.value,{present:t}=re({show:()=>e.forceMount||i(),element:()=>o()??null});return createEffect(on([()=>o(),()=>t()],([u,s])=>{if(u==null||!s)return;let c=()=>{let p=getFocusableTreeWalker(u,{tabbable:!0});d(p.nextNode()?void 0:0);};c();let y=new MutationObserver(c);y.observe(u,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabindex","disabled"]}),onCleanup(()=>{y.disconnect();});})),createEffect(on([()=>e.value,a],([u,s])=>{r.contentIdsMap().set(u,s);})),createComponent(Show,{get when(){return t()},get children(){return createComponent(a$1,mergeProps({as:"div",ref(u){let s=mergeRefs(n,e.ref);typeof s=="function"&&s(u);},get id(){return a()},role:"tabpanel",get tabIndex(){return f()},get"aria-labelledby"(){return r.triggerIdsMap().get(e.value)},get"data-orientation"(){return r.orientation()},get"data-selected"(){return i()?"":void 0}},g))}})}function w(l){let o=S(),[n,r]=splitProps(l,["style"]),[e,g$1]=createSignal({width:void 0,height:void 0}),{direction:f}=g(),d=()=>{let s=o.selectedTab();if(s==null)return;let c={transform:void 0,width:void 0,height:void 0},y=f()==="rtl"?-1*(s.offsetParent?.offsetWidth-s.offsetWidth-s.offsetLeft):s.offsetLeft;c.transform=o.orientation()==="vertical"?`translateY(${s.offsetTop}px)`:`translateX(${y}px)`,o.orientation()==="horizontal"?c.width=`${s.offsetWidth}px`:c.height=`${s.offsetHeight}px`,g$1(c);};onMount(()=>{queueMicrotask(()=>{d();});}),createEffect(on([o.selectedTab,o.orientation,f],()=>{d();},{defer:!0}));let[a,i]=createSignal(!1),t=null,u=null;return createResizeObserver(o.selectedTab,(s,c)=>{if(u!==c){u=c;return}i(!0),t&&clearTimeout(t),t=setTimeout(()=>{t=null,i(!1);},1),d();}),createComponent(a$1,mergeProps({as:"div",role:"presentation",get style(){return combineStyle(e(),n.style)},get"data-orientation"(){return o.orientation()},get"data-resizing"(){return a()}},r))}function K(l){let o,n=S(),[r,e$1]=splitProps(l,["ref","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),{direction:g$1}=g(),f=new a$2(()=>n.listState().collection(),g$1,n.orientation),d=e({selectionManager:()=>n.listState().selectionManager(),keyboardDelegate:()=>f,selectOnFocus:()=>n.activationMode()==="automatic",shouldFocusWrap:!1,disallowEmptySelection:!0},()=>o);return createEffect(()=>{if(o==null)return;let a=o.querySelector(`[data-key="${n.listState().selectedKey()}"]`);a!=null&&n.setSelectedTab(a);}),createComponent(a$1,mergeProps({as:"div",ref(a){let i=mergeRefs(t=>o=t,r.ref);typeof i=="function"&&i(a);},role:"tablist",get"aria-orientation"(){return n.orientation()},get"data-orientation"(){return n.orientation()},get onKeyDown(){return composeEventHandlers([r.onKeyDown,d.onKeyDown])},get onMouseDown(){return composeEventHandlers([r.onMouseDown,d.onMouseDown])},get onFocusIn(){return composeEventHandlers([r.onFocusIn,d.onFocusIn])},get onFocusOut(){return composeEventHandlers([r.onFocusOut,d.onFocusOut])}},e$1))}function q(l){let[o,n]=a$3({value:()=>access(l.selectedKey),defaultValue:()=>access(l.defaultSelectedKey),onChange:i=>l.onSelectionChange?.(i)}),r=createMemo(()=>{let i=o();return i!=null?[i]:[]}),[,e]=splitProps(l,["onSelectionChange"]),g=mergeProps$1(e,{selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:r,onSelectionChange:i=>{let t=i.values().next().value;t===o()&&l.onSelectionChange?.(t??""),n(t??"");}}),{collection:f,selectionManager:d}=i(g),a=createMemo(()=>{let i=o();return i!=null?f().getItem(i):void 0});return {collection:f,selectionManager:d,selectedKey:o,setSelectedKey:n,selectedItem:a}}function D(l){let o=`tabs-${createUniqueId()}`,n=mergeDefaultProps({id:o,orientation:"horizontal",activationMode:"automatic"},l),[r,e]=splitProps(n,["value","defaultValue","onChange","orientation","activationMode","disabled"]),[g,f]=createSignal([]),[d$1,a]=createSignal(),{DomCollectionProvider:i}=d({items:g,onItemsChange:f}),t=q({selectedKey:()=>r.value,defaultSelectedKey:()=>r.defaultValue,onSelectionChange:p=>r.onChange?.(String(p)),dataSource:g}),u=t.selectedKey();createEffect(on([()=>t.selectionManager(),()=>t.collection(),()=>t.selectedKey()],([p,C,X])=>{let m=X;if(p.isEmpty()||m==null||!C.getItem(m)){m=C.getFirstKey();let x=m!=null?C.getItem(m):void 0;for(;x?.disabled&&x.key!==C.getLastKey();)m=C.getKeyAfter(x.key),x=m!=null?C.getItem(m):void 0;x?.disabled&&m===C.getLastKey()&&(m=C.getFirstKey()),m!=null&&p.setSelectedKeys([m]);}(p.focusedKey()==null||!p.isFocused()&&m!==u)&&p.setFocusedKey(m),u=m;}));let s=new Map,c=new Map,y={isDisabled:()=>r.disabled??!1,orientation:()=>r.orientation,activationMode:()=>r.activationMode,triggerIdsMap:()=>s,contentIdsMap:()=>c,listState:()=>t,selectedTab:d$1,setSelectedTab:a,generateTriggerId:p=>`${e.id}-trigger-${p}`,generateContentId:p=>`${e.id}-content-${p}`};return createComponent(i,{get children(){return createComponent(T.Provider,{value:y,get children(){return createComponent(a$1,mergeProps({as:"div",get"data-orientation"(){return y.orientation()}},e))}})}})}function $(l){let o,n=S(),r=mergeDefaultProps({type:"button"},l),[e,g]=splitProps(r,["ref","id","value","disabled","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),f$1=()=>e.id??n.generateTriggerId(e.value),d=()=>n.listState().selectionManager().focusedKey()===e.value,a=()=>e.disabled||n.isDisabled(),i=()=>n.contentIdsMap().get(e.value);e$1({getItem:()=>({ref:()=>o,type:"item",key:e.value,textValue:"",disabled:a()})});let t=f({key:()=>e.value,selectionManager:()=>n.listState().selectionManager(),disabled:a},()=>o),u=s=>{isWebKit()&&focusWithoutScrolling(s.currentTarget);};return createEffect(on([()=>e.value,f$1],([s,c])=>{n.triggerIdsMap().set(s,c);})),createComponent(a$1,mergeProps({as:"button",ref(s){let c=mergeRefs(y=>o=y,e.ref);typeof c=="function"&&c(s);},get id(){return f$1()},role:"tab",get tabIndex(){return memo(()=>!a())()?t.tabIndex():void 0},get disabled(){return a()},get"aria-selected"(){return t.isSelected()},get"aria-disabled"(){return a()||void 0},get"aria-controls"(){return memo(()=>!!t.isSelected())()?i():void 0},get"data-key"(){return t.dataKey()},get"data-orientation"(){return n.orientation()},get"data-selected"(){return t.isSelected()?"":void 0},get"data-highlighted"(){return d()?"":void 0},get"data-disabled"(){return a()?"":void 0},get onPointerDown(){return composeEventHandlers([e.onPointerDown,t.onPointerDown])},get onPointerUp(){return composeEventHandlers([e.onPointerUp,t.onPointerUp])},get onClick(){return composeEventHandlers([e.onClick,t.onClick,u])},get onKeyDown(){return composeEventHandlers([e.onKeyDown,t.onKeyDown])},get onMouseDown(){return composeEventHandlers([e.onMouseDown,t.onMouseDown])},get onFocus(){return composeEventHandlers([e.onFocus,t.onFocus])}},g))}var Ee=Object.assign(D,{Content:v,Indicator:w,List:K,Trigger:$});

export { q as a, S as b, v as c, w as d, K as e, D as f, $ as g, Ee as h, Oe as i };
