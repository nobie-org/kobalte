import { a as a$4 } from './KGX75ZK2.js';
import { a as a$3 } from './3LFQJS72.js';
import { a as a$1 } from './STCLCRSQ.js';
import { a as a$2 } from './2B777EKY.js';
import { a } from './JSKF3YHK.js';
import { createComponent, mergeProps, isServer } from 'solid-js/web';
import { callHandler, mergeDefaultProps, getDocument, getWindow, mergeRefs, createGenerateId, contains, focusWithoutScrolling, isFunction } from '@kobalte/utils';
import { createContext, useContext, splitProps, createEffect, onCleanup, on, For, createSignal, createUniqueId, createMemo, onMount, Show } from 'solid-js';
import { combineStyle } from '@solid-primitives/props';
import { createStore } from 'solid-js/store';
import Re from 'solid-presence';

var ze={};a(ze,{CloseButton:()=>W,Description:()=>G,List:()=>X,ProgressFill:()=>j,ProgressTrack:()=>q,Region:()=>Q,Root:()=>tt,Title:()=>et,Toast:()=>qe,toaster:()=>rt,useToastContext:()=>l});var Y=createContext();function l(){let n=useContext(Y);if(n===void 0)throw new Error("[kobalte]: `useToastContext` must be used within a `Toast.Root` component");return n}function W(n){let r=l(),[t,o]=splitProps(n,["aria-label","onClick"]);return createComponent(a$1,mergeProps({get"aria-label"(){return t["aria-label"]||r.translations().close},onClick:a=>{callHandler(a,t.onClick),r.close();}},o))}function G(n){let r=l(),t=mergeDefaultProps({id:r.generateId("description")},n),[o,i]=splitProps(t,["id"]);return createEffect(()=>onCleanup(r.registerDescriptionId(o.id))),createComponent(a$2,mergeProps({as:"div",get id(){return o.id}},i))}var V=createContext();function I(){let n=useContext(V);if(n===void 0)throw new Error("[kobalte]: `useToastRegionContext` must be used within a `Toast.Region` component");return n}function X(n){let r,t=I(),[o,i]=splitProps(n,["ref","onFocusIn","onFocusOut","onPointerMove","onPointerLeave"]),a=s=>{callHandler(s,o.onFocusIn),t.pauseOnInteraction()&&!t.isPaused()&&t.pauseAllTimer();},f=s=>{callHandler(s,o.onFocusOut),contains(r,s.relatedTarget)||t.resumeAllTimer();},T=s=>{callHandler(s,o.onPointerMove),t.pauseOnInteraction()&&!t.isPaused()&&t.pauseAllTimer();},P=s=>{callHandler(s,o.onPointerLeave),contains(r,getDocument(r).activeElement)||t.resumeAllTimer();};return createEffect(on([()=>r,()=>t.hotkey()],([s,p])=>{if(isServer||!s)return;let g=getDocument(s),d=A=>{p.every(x=>A[x]||A.code===x)&&focusWithoutScrolling(s);};g.addEventListener("keydown",d),onCleanup(()=>g.removeEventListener("keydown",d));})),createEffect(()=>{if(!t.pauseOnPageIdle())return;let s=getWindow(r);s.addEventListener("blur",t.pauseAllTimer),s.addEventListener("focus",t.resumeAllTimer),onCleanup(()=>{s.removeEventListener("blur",t.pauseAllTimer),s.removeEventListener("focus",t.resumeAllTimer);});}),createComponent(a$2,mergeProps({as:"ol",ref(s){let p=mergeRefs(g=>r=g,o.ref);typeof p=="function"&&p(s);},tabIndex:-1,onFocusIn:a,onFocusOut:f,onPointerMove:T,onPointerLeave:P},i,{get children(){return createComponent(For,{get each(){return t.toasts()},children:s=>s.toastComponent({get toastId(){return s.id}})})}}))}function j(n){let r=I(),t=l(),[o,i]=splitProps(n,["style"]),[a,f]=createSignal(100),T=0;return createEffect(()=>{if(r.isPaused()||t.isPersistent())return;let P=setInterval(()=>{let s=new Date().getTime()-t.closeTimerStartTime()+T,p=Math.trunc(100-s/t.duration()*100);f(p<0?0:p);});onCleanup(()=>{T+=new Date().getTime()-t.closeTimerStartTime(),clearInterval(P);});}),createComponent(a$2,mergeProps({as:"div",get style(){return combineStyle({"--kb-toast-progress-fill-width":`${a()}%`},o.style)}},i))}function q(n){return createComponent(a$2,mergeProps({as:"div","aria-hidden":"true",role:"presentation"},n))}var[z,E]=createStore({toasts:[]});function me(n){E("toasts",r=>[...r,n]);}function pe(n){return z.toasts.find(r=>r.id===n)}function le(n,r){let t=z.toasts.findIndex(o=>o.id===n);t!==-1&&E("toasts",o=>[...o.slice(0,t),r,...o.slice(t+1)]);}function ue(n){E("toasts",r=>r.id===n,"dismiss",!0);}function de(n){E("toasts",r=>r.filter(t=>t.id!==n));}function fe(){E("toasts",[]);}var u={toasts:()=>z.toasts,add:me,get:pe,update:le,dismiss:ue,remove:de,clear:fe};var J="{hotkey}",ft={close:"Close"},Tt={notifications:n=>`Notifications (${n})`};function Q(n){let r=mergeDefaultProps({id:`toast-region-${createUniqueId()}`,hotkey:["altKey","KeyT"],duration:5e3,limit:3,swipeDirection:"right",swipeThreshold:50,pauseOnInteraction:!0,pauseOnPageIdle:!0,topLayer:!0,translations:Tt},n),[t,o]=splitProps(r,["translations","style","hotkey","duration","limit","swipeDirection","swipeThreshold","pauseOnInteraction","pauseOnPageIdle","topLayer","aria-label","regionId"]),i=createMemo(()=>u.toasts().filter(d=>d.region===t.regionId&&d.dismiss===!1).slice(0,t.limit)),[a,f]=createSignal(!1),T=()=>i().length>0,P=()=>t.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),s=()=>(t["aria-label"]||t.translations.notifications(J)).replace(J,P()),p=()=>({[a$4]:t.topLayer?"":void 0}),g={isPaused:a,toasts:i,hotkey:()=>t.hotkey,duration:()=>t.duration,swipeDirection:()=>t.swipeDirection,swipeThreshold:()=>t.swipeThreshold,pauseOnInteraction:()=>t.pauseOnInteraction,pauseOnPageIdle:()=>t.pauseOnPageIdle,pauseAllTimer:()=>f(!0),resumeAllTimer:()=>f(!1),generateId:createGenerateId(()=>o.id)};return createComponent(V.Provider,{value:g,get children(){return createComponent(a$2,mergeProps({as:"div",role:"region",tabIndex:-1,get"aria-label"(){return s()},get style(){return combineStyle({"pointer-events":T()?t.topLayer?"auto":void 0:"none"},t.style)}},p,o))}})}var ke="toast.swipeStart",Ne="toast.swipeMove",$e="toast.swipeCancel",Me="toast.swipeEnd";function tt(n){let r=I(),t=mergeDefaultProps({id:`toast-${createUniqueId()}`,priority:"high",translations:ft},n),[o,i]=splitProps(t,["ref","translations","toastId","style","priority","duration","persistent","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd","onEscapeKeyDown","onKeyDown","onPointerDown","onPointerMove","onPointerUp"]),[a,f]=createSignal(!0),[T,P]=createSignal(),[s,p]=createSignal(),[g,d]=createSignal(!0),[A,nt]=createSignal(),{present:x}=Re({show:a,element:()=>A()??null}),N=createMemo(()=>o.duration||r.duration()),$,M=0,F=N(),y=null,h=null,C=()=>{f(!1),d(!0);},wt=()=>{u.remove(o.toastId);},st=e=>{!e||o.persistent||(window.clearTimeout($),M=new Date().getTime(),$=window.setTimeout(C,e));},It=()=>{st(F),o.onResume?.();},xt=()=>{let e=new Date().getTime()-M;F=F-e,window.clearTimeout($),o.onPause?.();},ht=e=>{callHandler(e,o.onKeyDown),e.key==="Escape"&&(o.onEscapeKeyDown?.(e),e.defaultPrevented||C());},Ct=e=>{callHandler(e,o.onPointerDown),e.button===0&&(y={x:e.clientX,y:e.clientY});},vt=e=>{if(callHandler(e,o.onPointerMove),!y)return;let m=e.clientX-y.x,v=e.clientY-y.y,K=!!h,S=["left","right"].includes(r.swipeDirection()),w=["left","up"].includes(r.swipeDirection())?Math.min:Math.max,H=S?w(0,m):0,Et=S?0:w(0,v),U=e.pointerType==="touch"?10:2,b={x:H,y:Et},it={originalEvent:e,delta:b};if(K){h=b,k(Ne,o.onSwipeMove,it);let{x:_t,y:At}=b;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--kb-toast-swipe-move-x",`${_t}px`),e.currentTarget.style.setProperty("--kb-toast-swipe-move-y",`${At}px`);}else Pt(b,r.swipeDirection(),U)?(h=b,k(ke,o.onSwipeStart,it),e.currentTarget.setAttribute("data-swipe","start"),e.target.setPointerCapture(e.pointerId)):(Math.abs(m)>U||Math.abs(v)>U)&&(y=null);},St=e=>{callHandler(e,o.onPointerUp);let m=h,v=e.target;if(v.hasPointerCapture(e.pointerId)&&v.releasePointerCapture(e.pointerId),h=null,y=null,m){let K=e.currentTarget,S={originalEvent:e,delta:m};if(Pt(m,r.swipeDirection(),r.swipeThreshold())){k(Me,o.onSwipeEnd,S);let{x:w,y:H}=m;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),e.currentTarget.style.setProperty("--kb-toast-swipe-end-x",`${w}px`),e.currentTarget.style.setProperty("--kb-toast-swipe-end-y",`${H}px`),C();}else k($e,o.onSwipeCancel,S),e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--kb-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--kb-toast-swipe-end-y");K.addEventListener("click",w=>w.preventDefault(),{once:!0});}};onMount(()=>{r.toasts().find(e=>e.id===o.toastId&&e.update)&&d(!1);}),createEffect(on(()=>r.isPaused(),e=>{e?xt():It();},{defer:!0})),createEffect(on([a,N],([e,m])=>{e&&!r.isPaused()&&st(m);})),createEffect(on(()=>u.get(o.toastId)?.dismiss,e=>e&&C())),createEffect(on(()=>x(),e=>!e&&wt()));let bt={translations:()=>o.translations,close:C,duration:N,isPersistent:()=>o.persistent??!1,closeTimerStartTime:()=>M,generateId:createGenerateId(()=>i.id),registerTitleId:a$3(P),registerDescriptionId:a$3(p)};return createComponent(Show,{get when(){return x()},get children(){return createComponent(Y.Provider,{value:bt,get children(){return createComponent(a$2,mergeProps({as:"li",ref(e){let m=mergeRefs(nt,o.ref);typeof m=="function"&&m(e);},role:"status",tabIndex:0,get style(){return combineStyle({animation:g()?void 0:"none","user-select":"none","touch-action":"none"},o.style)},get"aria-live"(){return o.priority==="high"?"assertive":"polite"},"aria-atomic":"true",get"aria-labelledby"(){return T()},get"aria-describedby"(){return s()},get"data-opened"(){return a()?"":void 0},get"data-closed"(){return a()?void 0:""},get"data-swipe-direction"(){return r.swipeDirection()},onKeyDown:ht,onPointerDown:Ct,onPointerMove:vt,onPointerUp:St},i))}})}})}function Pt(n,r,t=0){let o=Math.abs(n.x),i=Math.abs(n.y),a=o>i;return r==="left"||r==="right"?a&&o>t:!a&&i>t}function k(n,r,t){let o=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});r&&o.addEventListener(n,r,{once:!0}),o.dispatchEvent(i);}function et(n){let r=l(),t=mergeDefaultProps({id:r.generateId("title")},n),[o,i]=splitProps(t,["id"]);return createEffect(()=>onCleanup(r.registerTitleId(o.id))),createComponent(a$2,mergeProps({as:"div",get id(){return o.id}},i))}var Ge=0;function yt(n,r){let t=Ge++;return u.add({id:t,toastComponent:n,dismiss:!1,update:!1,region:r?.region}),t}function ot(n,r){u.update(n,{id:n,toastComponent:r,dismiss:!1,update:!0});}function Ve(n,r,t){let o=yt(i=>r({get toastId(){return i.toastId},state:"pending"}),t);return (isFunction(n)?n():n).then(i=>ot(o,a=>r({get toastId(){return a.toastId},state:"fulfilled",data:i}))).catch(i=>ot(o,a=>r({get toastId(){return a.toastId},state:"rejected",error:i}))),o}function Xe(n){return u.dismiss(n),n}function je(){u.clear();}var rt={show:yt,update:ot,promise:Ve,dismiss:Xe,clear:je};var qe=Object.assign(tt,{CloseButton:W,Description:G,List:X,ProgressFill:j,ProgressTrack:q,Region:Q,Title:et,toaster:rt});

export { rt as a, l as b, W as c, G as d, X as e, j as f, q as g, Q as h, tt as i, et as j, qe as k, ze as l };
