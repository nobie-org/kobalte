import { c, f } from './U4KVQHPL.js';
import { a as a$1 } from './FNVJ2A2S.js';
import { a as a$2 } from './B6YIKRNF.js';
import { a as a$3 } from './MMSSIPBC.js';
import { a } from './JSKF3YHK.js';
import { createComponent, mergeProps, Portal, isServer } from 'solid-js/web';
import { mergeRefs, mergeDefaultProps, createGlobalListeners, contains, isPointInPolygon, getEventPoint, callHandler } from '@kobalte/utils';
import { createContext, useContext, splitProps, Show, createUniqueId, createSignal, createEffect, onCleanup, createMemo } from 'solid-js';
import { combineStyle } from '@solid-primitives/props';
import fe from 'solid-presence';

var be={};a(be,{Arrow:()=>c,Content:()=>x,HoverCard:()=>ve,Portal:()=>H,Root:()=>w,Trigger:()=>R,useHoverCardContext:()=>u});var b=createContext();function u(){let i=useContext(b);if(i===void 0)throw new Error("[kobalte]: `useHoverCardContext` must be used within a `HoverCard` component");return i}function x(i){let o=u(),[a,s]=splitProps(i,["ref","style"]);return createComponent(Show,{get when(){return o.contentPresent()},get children(){return createComponent(f.Positioner,{get children(){return createComponent(a$1,mergeProps({ref(r){let e=mergeRefs(t=>{o.setContentRef(t);},a.ref);typeof e=="function"&&e(r);},disableOutsidePointerEvents:!1,get style(){return combineStyle({"--kb-hovercard-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},a.style)},onFocusOutside:r=>r.preventDefault(),get onDismiss(){return o.close}},()=>o.dataset(),s))}})}})}function H(i){let o=u();return createComponent(Show,{get when(){return o.contentPresent()},get children(){return createComponent(Portal,i)}})}function B(i,o,a){let s=i.split("-")[0],r=o.getBoundingClientRect(),e=a.getBoundingClientRect(),t=[],p=r.left+r.width/2,n=r.top+r.height/2;switch(s){case"top":t.push([r.left,n]),t.push([e.left,e.bottom]),t.push([e.left,e.top]),t.push([e.right,e.top]),t.push([e.right,e.bottom]),t.push([r.right,n]);break;case"right":t.push([p,r.top]),t.push([e.left,e.top]),t.push([e.right,e.top]),t.push([e.right,e.bottom]),t.push([e.left,e.bottom]),t.push([p,r.bottom]);break;case"bottom":t.push([r.left,n]),t.push([e.left,e.top]),t.push([e.left,e.bottom]),t.push([e.right,e.bottom]),t.push([e.right,e.top]),t.push([r.right,n]);break;case"left":t.push([p,r.top]),t.push([e.right,e.top]),t.push([e.left,e.top]),t.push([e.left,e.bottom]),t.push([e.right,e.bottom]),t.push([p,r.bottom]);break}return t}function w(i){let o=`hovercard-${createUniqueId()}`,a=mergeDefaultProps({id:o,openDelay:700,closeDelay:300},i),[s,r]=splitProps(a,["id","open","defaultOpen","onOpenChange","openDelay","closeDelay","ignoreSafeArea","forceMount"]),e,t,[p,n]=createSignal(),[c,W]=createSignal(),[G,M]=createSignal(r.placement),m=a$2({open:()=>s.open,defaultOpen:()=>s.defaultOpen,onOpenChange:l=>s.onOpenChange?.(l)}),{present:j}=fe({show:()=>s.forceMount||m.isOpen(),element:()=>c()??null}),{addGlobalListener:q,removeGlobalListener:U}=createGlobalListeners(),X=()=>{isServer||(e=window.setTimeout(()=>{e=void 0,m.open();},s.openDelay));},T=()=>{isServer||(t=window.setTimeout(()=>{t=void 0,m.close();},s.closeDelay));},D=()=>{isServer||(window.clearTimeout(e),e=void 0);},d=()=>{isServer||(window.clearTimeout(t),t=void 0);},E=l=>contains(p(),l)||contains(c(),l),Y=l=>{let g=p(),f=c();if(!(!g||!f))return B(l,g,f)},S=l=>{let g=l.target;if(E(g)){d();return}if(!s.ignoreSafeArea){let f=Y(G());if(f&&isPointInPolygon(getEventPoint(l),f)){d();return}}t||T();};createEffect(()=>{m.isOpen()&&(q(document,"pointermove",S,!0),onCleanup(()=>{U(document,"pointermove",S,!0);}));}),onCleanup(()=>{D(),d();});let z={dataset:createMemo(()=>({"data-expanded":m.isOpen()?"":void 0,"data-closed":m.isOpen()?void 0:""})),isOpen:m.isOpen,contentPresent:j,openWithDelay:X,closeWithDelay:T,cancelOpening:D,cancelClosing:d,close:m.close,isTargetOnHoverCard:E,setTriggerRef:n,setContentRef:W};return createComponent(b.Provider,{value:z,get children(){return createComponent(f,mergeProps({anchorRef:p,contentRef:c,onCurrentPlacementChange:M},r))}})}function R(i){let o=u(),[a,s]=splitProps(i,["ref","onPointerEnter","onPointerLeave","onFocus","onBlur"]),r=n=>{callHandler(n,a.onPointerEnter),!(n.pointerType==="touch"||s.disabled||n.defaultPrevented)&&(o.cancelClosing(),o.isOpen()||o.openWithDelay());},e=n=>{callHandler(n,a.onPointerLeave),n.pointerType!=="touch"&&o.cancelOpening();},t=n=>{callHandler(n,a.onFocus),!(s.disabled||n.defaultPrevented)&&(o.cancelClosing(),o.isOpen()||o.openWithDelay());},p=n=>{callHandler(n,a.onBlur),o.cancelOpening();let c=n.relatedTarget;o.isTargetOnHoverCard(c)||o.closeWithDelay();};return onCleanup(o.cancelOpening),createComponent(a$3,mergeProps({ref(n){let c=mergeRefs(o.setTriggerRef,a.ref);typeof c=="function"&&c(n);},onPointerEnter:r,onPointerLeave:e,onFocus:t,onBlur:p},()=>o.dataset(),s))}var ve=Object.assign(w,{Arrow:c,Content:x,Portal:H,Trigger:R});

export { u as a, x as b, H as c, w as d, R as e, ve as f, be as g };
