import{a as w,b as f,e as I,j as C,v as L}from"./B2BYBUWU.jsx";import{a as V}from"./H4JCYUZR.jsx";import{a as P}from"./A5YUKSV6.jsx";import{a as A}from"./HAEWETXL.jsx";import{mergeDefaultProps as k}from"@kobalte/utils";import{createUniqueId as q,splitProps as z}from"solid-js";function H(a){let u=f(),m=k({modal:!1},a),[l,n]=z(m,["value"]),p=q(),t=u.generateId(`menubar-menu-${p}`),r=k({id:t},n);return<L value={l.value??p}{...r}/>}import{contains as U,createGenerateId as $,mergeDefaultProps as j,mergeRefs as G}from"@kobalte/utils";import{createEffect as h,createMemo as K,createSignal as F,createUniqueId as W,onCleanup as B,splitProps as J}from"solid-js";import{isServer as N}from"solid-js/web";function Me(a){let u,m=`menubar-${W()}`,l=j({id:m,loop:!0,orientation:"horizontal"},a),[n,p]=J(l,["ref","value","defaultValue","onValueChange","loop","focusOnAlt","autoFocusMenu","onAutoFocusMenuChange","orientation"]),[t,r]=P({value:()=>n.value,defaultValue:()=>n.defaultValue,onChange:e=>n.onValueChange?.(e)}),[S,T]=F(),[i,O]=F(new Map),[R,M]=P({value:()=>n.autoFocusMenu,defaultValue:()=>!1,onChange:n.onAutoFocusMenuChange}),E=()=>t()&&R()&&!t()?.includes("link-trigger-"),s={dataset:K(()=>({"data-expanded":E()?"":void 0,"data-closed":E()?void 0:""})),value:t,setValue:r,lastValue:S,setLastValue:T,menus:()=>new Set([...i().keys()]),menuRefs:()=>[...i().values()].flat(),menuRefMap:()=>i(),registerMenu:(e,o)=>{O(c=>{let d=new Map;return c.forEach((b,D)=>d.set(D,b)),d.set(e,o),d})},unregisterMenu:e=>{O(o=>{o.delete(e);let c=new Map;return o.forEach((d,b)=>c.set(b,d)),c})},nextMenu:()=>{let e=[...i().keys()];if(t()==null){r(e[0]);return}let o=e.indexOf(t());if(o===e.length-1){n.loop&&r(e[0]);return}r(e[o+1])},previousMenu:()=>{let e=[...i().keys()];if(t()==null){r(e[0]);return}let o=e.indexOf(t());if(o===0){n.loop&&r(e[e.length-1]);return}r(e[o-1])},closeMenu:()=>{M(!1),r(void 0)},autoFocusMenu:()=>R(),setAutoFocusMenu:M,generateId:$(()=>p.id),orientation:()=>n.orientation};h(()=>{t()==null&&M(!1)}),V({onInteractOutside:()=>{s.closeMenu(),setTimeout(()=>s.closeMenu())},shouldExcludeElement:e=>[u,...i().values()].flat().some(o=>U(o,e))},()=>u);let g=e=>{e.key==="Alt"&&(e.preventDefault(),e.stopPropagation(),s.value()===void 0?s.nextMenu():s.closeMenu())};return h(()=>{N||(n.focusOnAlt?window.addEventListener("keydown",g):window.removeEventListener("keydown",g),B(()=>{window.removeEventListener("keydown",g)}))}),h(()=>{t()!=null&&T(t())}),<w.Provider value={s}><A as="div"ref={G(e=>u=e,n.ref)}role="menubar"data-orientation={n.orientation}aria-orientation={n.orientation}{...p}/></w.Provider>}import{createUniqueId as Q}from"solid-js";function Ce(a){let u=f();if(I()===void 0&&Object.hasOwn(a,"href")){let l=u.generateId("link-trigger-")+Q();return<H value={l}><C{...a}/></H>}return C(a)}export{H as a,Me as b,Ce as c};
