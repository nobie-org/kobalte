import { a as a$3 } from './VKD4BN57.js';
import { b } from './GDC443NN.js';
import { f, i } from './K4TV2NLR.js';
import { a as a$1 } from './3LFQJS72.js';
import { a as a$2 } from './2B777EKY.js';
import { a } from './JSKF3YHK.js';
import { createComponent, mergeProps } from 'solid-js/web';
import { mergeDefaultProps, isMac, isWebKit, createGenerateId, mergeRefs, composeEventHandlers, access, Key, callHandler, focusWithoutScrolling } from '@kobalte/utils';
import { createContext, useContext, createUniqueId, splitProps, createSignal, createMemo, createEffect, onCleanup, Show, Switch, Match } from 'solid-js';

var He={};a(He,{Item:()=>C,ItemDescription:()=>L,ItemIndicator:()=>F,ItemLabel:()=>v,Listbox:()=>ze,Root:()=>M,Section:()=>O,useListboxContext:()=>h});var S=createContext();function h(){let o=useContext(S);if(o===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return o}var D=createContext();function g(){let o=useContext(D);if(o===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return o}function C(o){let r,t=h(),c=`${t.generateId("item")}-${createUniqueId()}`,e=mergeDefaultProps({id:c},o),[n,l]=splitProps(e,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[m,P]=createSignal(),[u,x]=createSignal(),p=()=>t.listState().selectionManager(),B=()=>p().focusedKey()===n.item.key,i=f({key:()=>n.item.key,selectionManager:p,shouldSelectOnPressUp:t.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>t.shouldSelectOnPressUp()&&t.shouldFocusOnHover(),shouldUseVirtualFocus:t.shouldUseVirtualFocus,disabled:()=>n.item.disabled},()=>r),W=()=>{if(p().selectionMode()!=="none")return i.isSelected()},y=createMemo(()=>!(isMac()&&isWebKit())),G=()=>y()?n["aria-label"]:void 0,N=()=>y()?m():void 0,A=()=>y()?u():void 0,q=()=>{if(!t.isVirtualized())return;let d=t.listState().collection().getItem(n.item.key)?.index;return d!=null?d+1:void 0},j=()=>{if(t.isVirtualized())return a$3(t.listState().collection())},J=d=>{callHandler(d,n.onPointerMove),d.pointerType==="mouse"&&!i.isDisabled()&&t.shouldFocusOnHover()&&(focusWithoutScrolling(d.currentTarget),p().setFocused(!0),p().setFocusedKey(n.item.key));},U=createMemo(()=>({"data-disabled":i.isDisabled()?"":void 0,"data-selected":i.isSelected()?"":void 0,"data-highlighted":B()?"":void 0})),Q={isSelected:i.isSelected,dataset:U,generateId:createGenerateId(()=>l.id),registerLabelId:a$1(P),registerDescriptionId:a$1(x)};return createComponent(D.Provider,{value:Q,get children(){return createComponent(a$2,mergeProps({as:"li",ref(d){let $=mergeRefs(X=>r=X,n.ref);typeof $=="function"&&$(d);},role:"option",get tabIndex(){return i.tabIndex()},get"aria-disabled"(){return i.isDisabled()},get"aria-selected"(){return W()},get"aria-label"(){return G()},get"aria-labelledby"(){return N()},get"aria-describedby"(){return A()},get"aria-posinset"(){return q()},get"aria-setsize"(){return j()},get"data-key"(){return i.dataKey()},get onPointerDown(){return composeEventHandlers([n.onPointerDown,i.onPointerDown])},get onPointerUp(){return composeEventHandlers([n.onPointerUp,i.onPointerUp])},get onClick(){return composeEventHandlers([n.onClick,i.onClick])},get onKeyDown(){return composeEventHandlers([n.onKeyDown,i.onKeyDown])},get onMouseDown(){return composeEventHandlers([n.onMouseDown,i.onMouseDown])},get onFocus(){return composeEventHandlers([n.onFocus,i.onFocus])},onPointerMove:J},U,l))}})}function L(o){let r=g(),t=mergeDefaultProps({id:r.generateId("description")},o);return createEffect(()=>onCleanup(r.registerDescriptionId(t.id))),createComponent(a$2,mergeProps({as:"div"},()=>r.dataset(),t))}function F(o){let r=g(),t=mergeDefaultProps({id:r.generateId("indicator")},o),[c,e]=splitProps(t,["forceMount"]);return createComponent(Show,{get when(){return c.forceMount||r.isSelected()},get children(){return createComponent(a$2,mergeProps({as:"div","aria-hidden":"true"},()=>r.dataset(),e))}})}function v(o){let r=g(),t=mergeDefaultProps({id:r.generateId("label")},o);return createEffect(()=>onCleanup(r.registerLabelId(t.id))),createComponent(a$2,mergeProps({as:"div"},()=>r.dataset(),t))}function M(o){let r,t=`listbox-${createUniqueId()}`,c=mergeDefaultProps({id:t,selectionMode:"single",virtualized:!1},o),[e,n]=splitProps(c,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),l=createMemo(()=>e.state?e.state:i({selectedKeys:()=>e.value,defaultSelectedKeys:()=>e.defaultValue,onSelectionChange:e.onChange,allowDuplicateSelectionEvents:()=>access(e.allowDuplicateSelectionEvents),disallowEmptySelection:()=>access(e.disallowEmptySelection),selectionBehavior:()=>access(e.selectionBehavior),selectionMode:()=>access(e.selectionMode),dataSource:()=>e.options??[],getKey:()=>e.optionValue,getTextValue:()=>e.optionTextValue,getDisabled:()=>e.optionDisabled,getSectionChildren:()=>e.optionGroupChildren})),m=b({selectionManager:()=>l().selectionManager(),collection:()=>l().collection(),autoFocus:()=>access(e.autoFocus),shouldFocusWrap:()=>access(e.shouldFocusWrap),keyboardDelegate:()=>e.keyboardDelegate,disallowEmptySelection:()=>access(e.disallowEmptySelection),selectOnFocus:()=>access(e.selectOnFocus),disallowTypeAhead:()=>access(e.disallowTypeAhead),shouldUseVirtualFocus:()=>access(e.shouldUseVirtualFocus),allowsTabNavigation:()=>access(e.allowsTabNavigation),isVirtualized:()=>e.virtualized,scrollToKey:()=>e.scrollToItem},()=>r,()=>e.scrollRef?.()),P={listState:l,generateId:createGenerateId(()=>n.id),shouldUseVirtualFocus:()=>c.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>c.shouldSelectOnPressUp,shouldFocusOnHover:()=>c.shouldFocusOnHover,isVirtualized:()=>e.virtualized};return createComponent(S.Provider,{value:P,get children(){return createComponent(a$2,mergeProps({as:"ul",ref(u){let x=mergeRefs(p=>r=p,e.ref);typeof x=="function"&&x(u);},role:"listbox",get tabIndex(){return m.tabIndex()},get"aria-multiselectable"(){return l().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return composeEventHandlers([e.onKeyDown,m.onKeyDown])},get onMouseDown(){return composeEventHandlers([e.onMouseDown,m.onMouseDown])},get onFocusIn(){return composeEventHandlers([e.onFocusIn,m.onFocusIn])},get onFocusOut(){return composeEventHandlers([e.onFocusOut,m.onFocusOut])}},n,{get children(){return createComponent(Show,{get when(){return !e.virtualized},get fallback(){return e.children?.(l().collection)},get children(){return createComponent(Key,{get each(){return [...l().collection()]},by:"key",children:u=>createComponent(Switch,{get children(){return [createComponent(Match,{get when(){return u().type==="section"},get children(){return e.renderSection?.(u())}}),createComponent(Match,{get when(){return u().type==="item"},get children(){return e.renderItem?.(u())}})]}})})}})}}))}})}function O(o){return createComponent(a$2,mergeProps({as:"li",role:"presentation"},o))}var ze=Object.assign(M,{Item:C,ItemDescription:L,ItemIndicator:F,ItemLabel:v,Section:O});

export { h as a, C as b, L as c, F as d, v as e, M as f, O as g, ze as h, He as i };
