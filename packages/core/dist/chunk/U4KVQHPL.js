import { g } from './UAI26547.js';
import { a } from './2B777EKY.js';
import { template, createComponent, mergeProps, effect, setAttribute } from 'solid-js/web';
import { mergeDefaultProps, mergeRefs, getWindow } from '@kobalte/utils';
import { createContext, useContext, splitProps, createSignal, createEffect, onCleanup } from 'solid-js';
import { combineStyle } from '@solid-primitives/props';
import { autoUpdate, offset, flip, shift, size, hide, arrow, computePosition, platform } from '@floating-ui/dom';

var h=createContext();function m(){let r=useContext(h);if(r===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return r}var q=template('<svg display="block" viewBox="0 0 30 30" style="transform:scale(1.02)"><g><path fill="none" d="M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z"></path><path stroke="none" d="M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z">'),C=30,k=C/2,oe={top:180,right:-90,bottom:0,left:90};function D(r){let e=m(),n=mergeDefaultProps({size:C},r),[o,s]=splitProps(n,["ref","style","size"]),c=()=>e.currentPlacement().split("-")[0],u=re(e.contentRef),y=()=>u()?.getPropertyValue("background-color")||"none",g=()=>u()?.getPropertyValue(`border-${c()}-color`)||"none",P=()=>u()?.getPropertyValue(`border-${c()}-width`)||"0px",w=()=>Number.parseInt(P())*2*(C/o.size),$=()=>`rotate(${oe[c()]} ${k} ${k}) translate(0 2)`;return createComponent(a,mergeProps({as:"div",ref(i){let t=mergeRefs(e.setArrowRef,o.ref);typeof t=="function"&&t(i);},"aria-hidden":"true",get style(){return combineStyle({position:"absolute","font-size":`${o.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:y(),stroke:g(),"stroke-width":w()},o.style)}},s,{get children(){let i=q(),t=i.firstChild;return effect(()=>setAttribute(t,"transform",$())),i}}))}function re(r){let[e,n]=createSignal();return createEffect(()=>{let o=r();o&&n(getWindow(o).getComputedStyle(o));}),e}function M(r){let e=m(),[n,o]=splitProps(r,["ref","style"]);return createComponent(a,mergeProps({as:"div",ref(s){let c=mergeRefs(e.setPositionerRef,n.ref);typeof c=="function"&&c(s);},"data-popper-positioner":"",get style(){return combineStyle({position:"absolute",top:0,left:0,"min-width":"max-content"},n.style)}},o))}function S(r){let{x:e=0,y:n=0,width:o=0,height:s=0}=r??{};if(typeof DOMRect=="function")return new DOMRect(e,n,o,s);let c={x:e,y:n,width:o,height:s,top:n,right:e+o,bottom:n+s,left:e};return {...c,toJSON:()=>c}}function L(r,e){return {contextElement:r,getBoundingClientRect:()=>{let o=e(r);return o?S(o):r?r.getBoundingClientRect():S()}}}function O(r){return /^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(r)}var le={top:"bottom",right:"left",bottom:"top",left:"right"};function z(r,e){let[n,o]=r.split("-"),s=le[n];return o?n==="left"||n==="right"?`${s} ${o==="start"?"top":"bottom"}`:o==="start"?`${s} ${e==="rtl"?"right":"left"}`:`${s} ${e==="rtl"?"left":"right"}`:`${s} center`}function T(r){let e=mergeDefaultProps({getAnchorRect:i=>i?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},r),[n,o]=createSignal(),[s,c]=createSignal(),[u,y]=createSignal(e.placement),g$1=()=>L(e.anchorRef?.(),e.getAnchorRect),{direction:P}=g();async function w(){let i=g$1(),t=n(),l=s();if(!i||!t)return;let b=(l?.clientHeight||0)/2,V=typeof e.gutter=="number"?e.gutter+b:e.gutter??b;t.style.setProperty("--kb-popper-content-overflow-padding",`${e.overflowPadding}px`),i.getBoundingClientRect();let d=[offset(({placement:p})=>{let f=!!p.split("-")[1];return {mainAxis:V,crossAxis:f?void 0:e.shift,alignmentAxis:e.shift}})];if(e.flip!==!1){let p=typeof e.flip=="string"?e.flip.split(" "):void 0;if(p!==void 0&&!p.every(O))throw new Error("`flip` expects a spaced-delimited list of placements");d.push(flip({padding:e.overflowPadding,fallbackPlacements:p}));}(e.slide||e.overlap)&&d.push(shift({mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding})),d.push(size({padding:e.overflowPadding,apply({availableWidth:p,availableHeight:f,rects:R}){let _=Math.round(R.reference.width);p=Math.floor(p),f=Math.floor(f),t.style.setProperty("--kb-popper-anchor-width",`${_}px`),t.style.setProperty("--kb-popper-content-available-width",`${p}px`),t.style.setProperty("--kb-popper-content-available-height",`${f}px`),e.sameWidth&&(t.style.width=`${_}px`),e.fitViewport&&(t.style.maxWidth=`${p}px`,t.style.maxHeight=`${f}px`);}})),e.hideWhenDetached&&d.push(hide({padding:e.detachedPadding})),l&&d.push(arrow({element:l,padding:e.arrowPadding}));let a=await computePosition(i,t,{placement:e.placement,strategy:"absolute",middleware:d,platform:{...platform,isRTL:()=>P()==="rtl"}});if(y(a.placement),e.onCurrentPlacementChange?.(a.placement),!t)return;t.style.setProperty("--kb-popper-content-transform-origin",z(a.placement,P()));let W=Math.round(a.x),H=Math.round(a.y),E;if(e.hideWhenDetached&&(E=a.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(t.style,{top:"0",left:"0",transform:`translate3d(${W}px, ${H}px, 0)`,visibility:E}),l&&a.middlewareData.arrow){let{x:p,y:f}=a.middlewareData.arrow,R=a.placement.split("-")[0];Object.assign(l.style,{left:p!=null?`${p}px`:"",top:f!=null?`${f}px`:"",[R]:"100%"});}}createEffect(()=>{let i=g$1(),t=n();if(!i||!t)return;let l=autoUpdate(i,t,w,{elementResize:typeof ResizeObserver=="function"});onCleanup(l);}),createEffect(()=>{let i=n(),t=e.contentRef?.();!i||!t||queueMicrotask(()=>{i.style.zIndex=getComputedStyle(t).zIndex;});});let $={currentPlacement:u,contentRef:()=>e.contentRef?.(),setPositionerRef:o,setArrowRef:c};return createComponent(h.Provider,{value:$,get children(){return e.children}})}var ot=Object.assign(T,{Arrow:D,Context:h,usePopperContext:m,Positioner:M});

export { h as a, m as b, D as c, M as d, T as e, ot as f };
