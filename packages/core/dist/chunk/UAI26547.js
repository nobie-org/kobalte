import { createContext, createSignal, createMemo, onMount, onCleanup, useContext } from 'solid-js';
import { isServer, createComponent } from 'solid-js/web';
import { DateFormatter } from '@internationalized/date';
import { access } from '@kobalte/utils';
import { NumberFormatter } from '@internationalized/number';

var y=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),D=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function z(e){if(Intl.Locale){let r=new Intl.Locale(e).maximize().script??"";return y.has(r)}let t=e.split("-")[0];return D.has(t)}function f(e){return z(e)?"rtl":"ltr"}function h(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";return {locale:e,direction:f(e)}}var p=h(),m=new Set;function x(){p=h();for(let e of m)e(p);}function g(){let e={locale:"en-US",direction:"ltr"},[t,r]=createSignal(p),o=createMemo(()=>isServer?e:t());return onMount(()=>{m.size===0&&window.addEventListener("languagechange",x),m.add(r),onCleanup(()=>{m.delete(r),m.size===0&&window.removeEventListener("languagechange",x);});}),{locale:()=>o().locale,direction:()=>o().direction}}var C=createContext();function Q(e){let t=g(),r={locale:()=>e.locale??t.locale(),direction:()=>e.locale?f(e.locale):t.direction()};return createComponent(C.Provider,{value:r,get children(){return e.children}})}function l(){let e=g();return useContext(C)||e}var d=new Map;function F(e){let{locale:t}=l(),r=createMemo(()=>t()+(e?Object.entries(e).sort((o,c)=>o[0]<c[0]?-1:1).join():""));return createMemo(()=>{let o=r(),c;return d.has(o)&&(c=d.get(o)),c||(c=new Intl.Collator(t(),e),d.set(o,c)),c})}function ne(e){let{locale:t}=l();return createMemo(()=>new DateFormatter(t(),access(e)))}function ie(e){let t=F({usage:"search",...e});return {startsWith:(s,n)=>{if(n.length===0)return !0;let i=s.normalize("NFC"),a=n.normalize("NFC");return t().compare(i.slice(0,a.length),a)===0},endsWith:(s,n)=>{if(n.length===0)return !0;let i=s.normalize("NFC"),a=n.normalize("NFC");return t().compare(i.slice(-a.length),a)===0},contains:(s,n)=>{if(n.length===0)return !0;let i=s.normalize("NFC"),a=n.normalize("NFC"),u=0,L=n.length;for(;u+L<=i.length;u++){let S=i.slice(u,u+L);if(t().compare(a,S)===0)return !0}return !1}}}function pe(e){let{locale:t}=l();return createMemo(()=>new NumberFormatter(t(),access(e)))}

export { D as a, z as b, f as c, h as d, g as e, Q as f, l as g, F as h, ne as i, ie as j, pe as k };
