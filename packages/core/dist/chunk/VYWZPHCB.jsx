import{a as p}from"./H2DQBBBH.jsx";import{a as A}from"./24EX2HEU.jsx";import{access as u}from"@kobalte/utils";import{createEffect as h,onCleanup as N}from"solid-js";function _(i){h(()=>{u(i.isDisabled)||N(v(u(i.targets),u(i.root)))})}var a=new WeakMap,n=[];function v(i,l=document.body){let s=new Set(i),c=new Set,E=e=>{for(let o of e.querySelectorAll(`[${A}], [${p}]`))s.add(o);let t=o=>{if(s.has(o)||o.parentElement&&c.has(o.parentElement)&&o.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let T of s)if(o.contains(T))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t}),b=t(e);if(b===NodeFilter.FILTER_ACCEPT&&m(e),b!==NodeFilter.FILTER_REJECT){let o=r.nextNode();for(;o!=null;)m(o),o=r.nextNode()}},m=e=>{let t=a.get(e)??0;e.getAttribute("aria-hidden")==="true"&&t===0||(t===0&&e.setAttribute("aria-hidden","true"),c.add(e),a.set(e,t+1))};n.length&&n[n.length-1].disconnect(),E(l);let d=new MutationObserver(e=>{for(let t of e)if(!(t.type!=="childList"||t.addedNodes.length===0)&&![...s,...c].some(r=>r.contains(t.target))){for(let r of t.removedNodes)r instanceof Element&&(s.delete(r),c.delete(r));for(let r of t.addedNodes)(r instanceof HTMLElement||r instanceof SVGElement)&&(r.dataset.liveAnnouncer==="true"||r.dataset.reactAriaTopLayer==="true")?s.add(r):r instanceof Element&&E(r)}});d.observe(l,{childList:!0,subtree:!0});let f={observe(){d.observe(l,{childList:!0,subtree:!0})},disconnect(){d.disconnect()}};return n.push(f),()=>{d.disconnect();for(let e of c){let t=a.get(e);if(t==null)return;t===1?(e.removeAttribute("aria-hidden"),a.delete(e)):a.set(e,t-1)}f===n[n.length-1]?(n.pop(),n.length&&n[n.length-1].observe()):n.splice(n.indexOf(f),1)}}export{_ as a,v as b};
