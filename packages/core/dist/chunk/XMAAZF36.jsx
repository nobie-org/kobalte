import{a as X}from"./IS3KSOW7.jsx";import{b as N}from"./GU5T4K6H.jsx";import{f as G,i as z}from"./M3KDFM4U.jsx";import{a as M}from"./LD6VFCOU.jsx";import{a as L}from"./HAEWETXL.jsx";import{a as ie}from"./XWCF3RNR.jsx";var Ke={};ie(Ke,{Item:()=>V,ItemDescription:()=>F,ItemIndicator:()=>H,ItemLabel:()=>U,Listbox:()=>ke,Root:()=>K,Section:()=>A,useListboxContext:()=>O});import{callHandler as pe,composeEventHandlers as T,createGenerateId as de,focusWithoutScrolling as ce,isMac as me,isWebKit as be,mergeDefaultProps as ue,mergeRefs as xe}from"@kobalte/utils";import{createMemo as B,createSignal as W,createUniqueId as Le,splitProps as Ie}from"solid-js";import{createContext as se,useContext as re}from"solid-js";var w=se();function O(){let t=re(w);if(t===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return t}import{createContext as ae,useContext as le}from"solid-js";var R=ae();function h(){let t=le(R);if(t===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return t}function V(t){let n,o=O(),f=`${o.generateId("item")}-${Le()}`,e=ue({id:f},t),[i,P]=Ie(e,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[C,D]=W(),[y,j]=W(),g=()=>o.listState().selectionManager(),q=()=>g().focusedKey()===i.item.key,s=G({key:()=>i.item.key,selectionManager:g,shouldSelectOnPressUp:o.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>o.shouldSelectOnPressUp()&&o.shouldFocusOnHover(),shouldUseVirtualFocus:o.shouldUseVirtualFocus,disabled:()=>i.item.disabled},()=>n),Q=()=>{if(g().selectionMode()!=="none")return s.isSelected()},E=B(()=>!(me()&&be())),Y=()=>E()?i["aria-label"]:void 0,Z=()=>E()?C():void 0,_=()=>E()?y():void 0,ee=()=>{if(!o.isVirtualized())return;let S=o.listState().collection().getItem(i.item.key)?.index;return S!=null?S+1:void 0},oe=()=>{if(o.isVirtualized())return X(o.listState().collection())},te=S=>{pe(S,i.onPointerMove),S.pointerType==="mouse"&&!s.isDisabled()&&o.shouldFocusOnHover()&&(ce(S.currentTarget),g().setFocused(!0),g().setFocusedKey(i.item.key))},J=B(()=>({"data-disabled":s.isDisabled()?"":void 0,"data-selected":s.isSelected()?"":void 0,"data-highlighted":q()?"":void 0})),ne={isSelected:s.isSelected,dataset:J,generateId:de(()=>P.id),registerLabelId:M(D),registerDescriptionId:M(j)};return<R.Provider value={ne}><L as="li"ref={xe(S=>n=S,i.ref)}role="option"tabIndex={s.tabIndex()}aria-disabled={s.isDisabled()}aria-selected={Q()}aria-label={Y()}aria-labelledby={Z()}aria-describedby={_()}aria-posinset={ee()}aria-setsize={oe()}data-key={s.dataKey()}onPointerDown={T([i.onPointerDown,s.onPointerDown])}onPointerUp={T([i.onPointerUp,s.onPointerUp])}onClick={T([i.onClick,s.onClick])}onKeyDown={T([i.onKeyDown,s.onKeyDown])}onMouseDown={T([i.onMouseDown,s.onMouseDown])}onFocus={T([i.onFocus,s.onFocus])}onPointerMove={te}{...J()}{...P}/></R.Provider>}import{mergeDefaultProps as Pe}from"@kobalte/utils";import{createEffect as fe,onCleanup as ye}from"solid-js";function F(t){let n=h(),o=Pe({id:n.generateId("description")},t);return fe(()=>ye(n.registerDescriptionId(o.id))),<L as="div"{...n.dataset()}{...o}/>}import{mergeDefaultProps as Se}from"@kobalte/utils";import{Show as Ce,splitProps as he}from"solid-js";function H(t){let n=h(),o=Se({id:n.generateId("indicator")},t),[f,e]=he(o,["forceMount"]);return<Ce when={f.forceMount||n.isSelected()}><L as="div"aria-hidden="true"{...n.dataset()}{...e}/></Ce>}import{mergeDefaultProps as Te}from"@kobalte/utils";import{createEffect as ge,onCleanup as Oe}from"solid-js";function U(t){let n=h(),o=Te({id:n.generateId("label")},t);return ge(()=>Oe(n.registerLabelId(o.id))),<L as="div"{...n.dataset()}{...o}/>}import{Key as De,access as I,composeEventHandlers as v,createGenerateId as Ee,mergeDefaultProps as Me,mergeRefs as we}from"@kobalte/utils";import{Match as $,Show as Re,Switch as Ve,createMemo as Fe,createUniqueId as He,splitProps as Ue}from"solid-js";function K(t){let n,o=`listbox-${He()}`,f=Me({id:o,selectionMode:"single",virtualized:!1},t),[e,i]=Ue(f,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),P=Fe(()=>e.state?e.state:z({selectedKeys:()=>e.value,defaultSelectedKeys:()=>e.defaultValue,onSelectionChange:e.onChange,allowDuplicateSelectionEvents:()=>I(e.allowDuplicateSelectionEvents),disallowEmptySelection:()=>I(e.disallowEmptySelection),selectionBehavior:()=>I(e.selectionBehavior),selectionMode:()=>I(e.selectionMode),dataSource:()=>e.options??[],getKey:()=>e.optionValue,getTextValue:()=>e.optionTextValue,getDisabled:()=>e.optionDisabled,getSectionChildren:()=>e.optionGroupChildren})),C=N({selectionManager:()=>P().selectionManager(),collection:()=>P().collection(),autoFocus:()=>I(e.autoFocus),shouldFocusWrap:()=>I(e.shouldFocusWrap),keyboardDelegate:()=>e.keyboardDelegate,disallowEmptySelection:()=>I(e.disallowEmptySelection),selectOnFocus:()=>I(e.selectOnFocus),disallowTypeAhead:()=>I(e.disallowTypeAhead),shouldUseVirtualFocus:()=>I(e.shouldUseVirtualFocus),allowsTabNavigation:()=>I(e.allowsTabNavigation),isVirtualized:()=>e.virtualized,scrollToKey:()=>e.scrollToItem},()=>n,()=>e.scrollRef?.()),D={listState:P,generateId:Ee(()=>i.id),shouldUseVirtualFocus:()=>f.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>f.shouldSelectOnPressUp,shouldFocusOnHover:()=>f.shouldFocusOnHover,isVirtualized:()=>e.virtualized};return<w.Provider value={D}><L as="ul"ref={we(y=>n=y,e.ref)}role="listbox"tabIndex={C.tabIndex()}aria-multiselectable={P().selectionManager().selectionMode()==="multiple"?!0:void 0}onKeyDown={v([e.onKeyDown,C.onKeyDown])}onMouseDown={v([e.onMouseDown,C.onMouseDown])}onFocusIn={v([e.onFocusIn,C.onFocusIn])}onFocusOut={v([e.onFocusOut,C.onFocusOut])}{...i}><Re when={!e.virtualized}fallback={e.children?.(P().collection)}><De each={[...P().collection()]}by="key">{y=><Ve><$ when={y().type==="section"}>{e.renderSection?.(y())}</$><$ when={y().type==="item"}>{e.renderItem?.(y())}</$></Ve>}</De></Re></L></w.Provider>}function A(t){return<L as="li"role="presentation"{...t}/>}var ke=Object.assign(K,{Item:V,ItemDescription:F,ItemIndicator:H,ItemLabel:U,Section:A});export{O as a,V as b,F as c,H as d,U as e,K as f,A as g,ke as h,Ke as i};
