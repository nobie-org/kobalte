import{a as Ie}from"./T6FUUJPP.jsx";import{b as U,c as N,d as W,e as z,f as Re,g as _}from"./XMAAZF36.jsx";import{c as X,f as D}from"./I2GXMTLG.jsx";import{a as fe,b as ye}from"./YU3BENDD.jsx";import{a as Ce}from"./MYEAQNC4.jsx";import{a as de}from"./RQL65DCQ.jsx";import{a as J}from"./27VXZQWW.jsx";import{a as ue,b as Se,c as Pe,d as I,e as G}from"./HIUHMFLS.jsx";import{a as Te}from"./GU5T4K6H.jsx";import{a as Oe,d as be,i as xe}from"./M3KDFM4U.jsx";import{h as ge}from"./ZSYY5OQU.jsx";import{a as ce}from"./CHPFHOO4.jsx";import{a as me}from"./VYWZPHCB.jsx";import{a as Ee}from"./HRP3PVHU.jsx";import{a as ae}from"./OYIYGTZT.jsx";import{a as h}from"./LD6VFCOU.jsx";import{a as Le}from"./3BC6LDRX.jsx";import{a as T}from"./HAEWETXL.jsx";import{a as ze}from"./XWCF3RNR.jsx";var kt={};ze(kt,{Arrow:()=>X,Content:()=>q,Description:()=>G,ErrorMessage:()=>J,HiddenSelect:()=>$,Icon:()=>Q,Item:()=>U,ItemDescription:()=>N,ItemIndicator:()=>W,ItemLabel:()=>z,Label:()=>Y,Listbox:()=>Z,Portal:()=>ee,Root:()=>te,Section:()=>_,Select:()=>Kt,Trigger:()=>oe,Value:()=>ne,useSelectContext:()=>p});import{focusWithoutScrolling as qe,mergeRefs as $e}from"@kobalte/utils";import{Show as Qe,splitProps as Ye}from"solid-js";import{combineStyle as Ze}from"@solid-primitives/props";import et from"solid-prevent-scroll";import{createContext as _e,useContext as je}from"solid-js";var j=_e();function p(){let s=je(j);if(s===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return s}function q(s){let o,e=p(),[t,i]=Ye(s,["ref","style","onCloseAutoFocus","onFocusOutside"]),d=r=>{e.close()},c=r=>{t.onFocusOutside?.(r),e.isOpen()&&e.isModal()&&r.preventDefault()};return me({isDisabled:()=>!(e.isOpen()&&e.isModal()),targets:()=>o?[o]:[]}),et({element:()=>o??null,enabled:()=>e.contentPresent()&&e.preventScroll()}),ce({trapFocus:()=>e.isOpen()&&e.isModal(),onMountAutoFocus:r=>{r.preventDefault()},onUnmountAutoFocus:r=>{t.onCloseAutoFocus?.(r),r.defaultPrevented||(qe(e.triggerRef()),r.preventDefault())}},()=>o),<Qe when={e.contentPresent()}><D.Positioner><Ee ref={$e(r=>{e.setContentRef(r),o=r},t.ref)}disableOutsidePointerEvents={e.isModal()&&e.isOpen()}excludedElements={[e.triggerRef]}style={Ze({"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},t.style)}onEscapeKeyDown={d}onFocusOutside={c}onDismiss={e.close}{...e.dataset()}{...i}/></D.Positioner></Qe>}function $(s){let o=p();return<Ie collection={o.listState().collection()}selectionManager={o.listState().selectionManager()}isOpen={o.isOpen()}isMultiple={o.isMultiple()}isVirtualized={o.isVirtualized()}focusTrigger={()=>o.triggerRef()?.focus()}{...s}/>}import{mergeDefaultProps as tt}from"@kobalte/utils";function Q(s){let o=p(),e=tt({children:"\u25BC"},s);return<T as="span"aria-hidden="true"{...o.dataset()}{...e}/>}import{callHandler as ot}from"@kobalte/utils";import{splitProps as nt}from"solid-js";function Y(s){let o=p(),[e,t]=nt(s,["onClick"]),i=d=>{ot(d,e.onClick),o.isDisabled()||o.triggerRef()?.focus()};return<Ce as="span"onClick={i}{...t}/>}import{callHandler as rt,mergeDefaultProps as lt,mergeRefs as st}from"@kobalte/utils";import{createEffect as it,onCleanup as pt,splitProps as at}from"solid-js";function Z(s){let o=p(),e=lt({id:o.generateId("listbox")},s),[t,i]=at(e,["ref","id","onKeyDown"]);it(()=>pt(o.registerListboxId(t.id)));let d=c=>{rt(c,t.onKeyDown),c.key==="Escape"&&c.preventDefault()};return<Re ref={st(o.setListboxRef,t.ref)}id={t.id}state={o.listState()}virtualized={o.isVirtualized()}autoFocus={o.autoFocus()}shouldSelectOnPressUp shouldFocusOnHover shouldFocusWrap={o.shouldFocusWrap()}disallowTypeAhead={o.disallowTypeAhead()}aria-labelledby={o.listboxAriaLabelledBy()}renderItem={o.renderItem}renderSection={o.renderSection}onKeyDown={d}{...i}/>}import{Show as St}from"solid-js";import{Portal as Pt}from"solid-js/web";function ee(s){let o=p();return<St when={o.contentPresent()}><Pt{...s}/></St>}import{createMemo as Me,splitProps as Et}from"solid-js";import{access as g,createGenerateId as ft,focusWithoutScrolling as yt,isFunction as Ct,mergeDefaultProps as gt}from"@kobalte/utils";import{createEffect as Ot,createMemo as v,createSignal as P,createUniqueId as bt,on as xt,splitProps as Tt}from"solid-js";import Lt from"solid-presence";function De(s){let o=`select-${bt()}`,e=gt({id:o,selectionMode:"single",disallowEmptySelection:!1,closeOnSelection:s.selectionMode==="single",allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1},s),[t,i,d,c]=Tt(e,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","closeOnSelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],ue),[r,u]=P(),[O,S]=P(),[M,V]=P(),[E,F]=P(),[R,w]=P(),[H,l]=P(),[f,y]=P(),[Fe,we]=P(!0),b=n=>{let a=t.optionValue;return a==null?String(n):String(Ct(a)?a(n):n[a])},re=v(()=>{let n=t.optionGroupChildren;return n==null?t.options:t.options.flatMap(a=>a[n]??a)}),He=v(()=>re().map(n=>b(n))),le=n=>[...n].map(a=>re().find(K=>b(K)===a)).filter(a=>a!=null),C=ae({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:n=>t.onOpenChange?.(n)}),m=xe({selectedKeys:()=>t.value!=null?t.value.map(b):t.value,defaultSelectedKeys:()=>t.defaultValue!=null?t.defaultValue.map(b):t.defaultValue,onSelectionChange:n=>{t.onChange?.(le(n)),t.closeOnSelection&&A()},allowDuplicateSelectionEvents:()=>g(t.allowDuplicateSelectionEvents),disallowEmptySelection:()=>g(t.disallowEmptySelection),selectionBehavior:()=>g(t.selectionBehavior),selectionMode:()=>t.selectionMode,dataSource:()=>t.options??[],getKey:()=>t.optionValue,getTextValue:()=>t.optionTextValue,getDisabled:()=>t.optionDisabled,getSectionChildren:()=>t.optionGroupChildren}),Ae=v(()=>le(m.selectionManager().selectedKeys())),Be=n=>{m.selectionManager().toggleSelection(b(n))},{present:Ke}=Lt({show:()=>t.forceMount||C.isOpen(),element:()=>R()??null}),ke=()=>{let n=H();n&&yt(n)},se=n=>{if(t.options.length<=0)return;we(n),C.open();let a=m.selectionManager().firstSelectedKey();a==null&&(n==="first"?a=m.collection().getFirstKey():n==="last"&&(a=m.collection().getLastKey())),ke(),m.selectionManager().setFocused(!0),m.selectionManager().setFocusedKey(a)},A=()=>{C.close(),m.selectionManager().setFocused(!1),m.selectionManager().setFocusedKey(void 0)},Ge=n=>{C.isOpen()?A():se(n)},{formControlContext:B}=Se(d);de(E,()=>{let n=t.defaultValue?[...t.defaultValue].map(b):new Oe;m.selectionManager().setSelectedKeys(n)});let Je=ge({usage:"search",sensitivity:"base"}),Xe=v(()=>{let n=g(t.keyboardDelegate);return n||new Te(m.collection,void 0,Je)}),Ue=n=>t.itemComponent?.({item:n}),Ne=n=>t.sectionComponent?.({section:n});Ot(xt([He],([n])=>{let K=[...m.selectionManager().selectedKeys()].filter(We=>n.includes(We));m.selectionManager().setSelectedKeys(K)},{defer:!0}));let ie=v(()=>({"data-expanded":C.isOpen()?"":void 0,"data-closed":C.isOpen()?void 0:""})),pe={dataset:ie,isOpen:C.isOpen,isDisabled:()=>B.isDisabled()??!1,isMultiple:()=>g(t.selectionMode)==="multiple",isVirtualized:()=>t.virtualized??!1,isModal:()=>t.modal??!1,preventScroll:()=>t.preventScroll??pe.isModal(),disallowTypeAhead:()=>t.disallowTypeAhead??!1,shouldFocusWrap:()=>t.shouldFocusWrap??!1,selectedOptions:Ae,contentPresent:Ke,autoFocus:Fe,triggerRef:E,listState:()=>m,keyboardDelegate:Xe,triggerId:r,valueId:O,listboxId:M,listboxAriaLabelledBy:f,setListboxAriaLabelledBy:y,setTriggerRef:F,setContentRef:w,setListboxRef:l,open:se,close:A,toggle:Ge,placeholder:()=>t.placeholder,renderItem:Ue,renderSection:Ne,removeOptionFromSelection:Be,generateId:ft(()=>g(d.id)),registerTriggerId:h(u),registerValueId:h(S),registerListboxId:h(V)};return<Pe.Provider value={B}><j.Provider value={pe}><D anchorRef={E}contentRef={R}{...i}><T as="div"role="group"id={g(d.id)}{...B.dataset()}{...ie()}{...c}/></D></j.Provider></Pe.Provider>}function te(s){let[o,e]=Et(s,["value","defaultValue","onChange","multiple"]),t=Me(()=>o.value!=null?o.multiple?o.value:[o.value]:o.value),i=Me(()=>o.defaultValue!=null?o.multiple?o.defaultValue:[o.defaultValue]:o.defaultValue),d=c=>{o.multiple?o.onChange?.(c??[]):o.onChange?.(c[0]??null)};return<De value={t()}defaultValue={i()}onChange={d}selectionMode={o.multiple?"multiple":"single"}{...e}/>}import{callHandler as L,mergeDefaultProps as vt,mergeRefs as Rt}from"@kobalte/utils";import{createEffect as Ve,onCleanup as ht,splitProps as It}from"solid-js";function oe(s){let o=I(),e=p(),t=vt({id:e.generateId("trigger")},s),[i,d,c]=It(t,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],fe),r=()=>e.listState().selectionManager(),u=()=>e.keyboardDelegate(),O=()=>i.disabled||e.isDisabled(),{fieldProps:S}=ye(d),{typeSelectHandlers:M}=be({keyboardDelegate:u,selectionManager:r,onTypeSelect:l=>r().select(l)}),V=()=>[e.listboxAriaLabelledBy(),e.valueId()].filter(Boolean).join(" ")||void 0,E=l=>{L(l,i.onPointerDown),l.currentTarget.dataset.pointerType=l.pointerType,!O()&&l.pointerType!=="touch"&&l.button===0&&(l.preventDefault(),e.toggle(!0))},F=l=>{L(l,i.onClick),!O()&&l.currentTarget.dataset.pointerType==="touch"&&e.toggle(!0)},R=l=>{if(L(l,i.onKeyDown),!O())switch(L(l,M.onKeyDown),l.key){case"Enter":case" ":case"ArrowDown":l.stopPropagation(),l.preventDefault(),e.toggle("first");break;case"ArrowUp":l.stopPropagation(),l.preventDefault(),e.toggle("last");break;case"ArrowLeft":{if(l.preventDefault(),e.isMultiple())return;let f=r().firstSelectedKey(),y=f!=null?u().getKeyAbove?.(f):u().getFirstKey?.();y!=null&&r().select(y);break}case"ArrowRight":{if(l.preventDefault(),e.isMultiple())return;let f=r().firstSelectedKey(),y=f!=null?u().getKeyBelow?.(f):u().getFirstKey?.();y!=null&&r().select(y);break}}},w=l=>{L(l,i.onFocus),!r().isFocused()&&r().setFocused(!0)},H=l=>{L(l,i.onBlur),!e.isOpen()&&r().setFocused(!1)};return Ve(()=>ht(e.registerTriggerId(S.id()))),Ve(()=>{e.setListboxAriaLabelledBy([S.ariaLabelledBy(),S.ariaLabel()&&!S.ariaLabelledBy()?S.id():null].filter(Boolean).join(" ")||void 0)}),<Le ref={Rt(e.setTriggerRef,i.ref)}id={S.id()}disabled={O()}aria-haspopup="listbox"aria-expanded={e.isOpen()}aria-controls={e.isOpen()?e.listboxId():void 0}aria-label={S.ariaLabel()}aria-labelledby={V()}aria-describedby={S.ariaDescribedBy()}onPointerDown={E}onClick={F}onKeyDown={R}onFocus={w}onBlur={H}{...e.dataset()}{...o.dataset()}{...c}/>}import{isFunction as Dt,mergeDefaultProps as Mt}from"@kobalte/utils";import{Show as Vt,children as Ft,createEffect as wt,onCleanup as Ht,splitProps as At}from"solid-js";function ne(s){let o=I(),e=p(),t=Mt({id:e.generateId("value")},s),[i,d]=At(t,["id","children"]),c=()=>e.listState().selectionManager(),r=()=>{let u=c().selectedKeys();return u.size===1&&u.has("")?!0:c().isEmpty()};return wt(()=>Ht(e.registerValueId(i.id))),<T as="span"id={i.id}data-placeholder-shown={r()?"":void 0}{...o.dataset()}{...d}><Vt when={!r()}fallback={e.placeholder()}><Bt state={{selectedOption:()=>e.selectedOptions()[0],selectedOptions:()=>e.selectedOptions(),remove:u=>e.removeOptionFromSelection(u),clear:()=>c().clearSelection()}}>{i.children}</Bt></Vt></T>}function Bt(s){let o=Ft(()=>{let e=s.children;return Dt(e)?e(s.state):e});return<>{o()}</>}var Kt=Object.assign(te,{Arrow:X,Content:q,Description:G,ErrorMessage:J,HiddenSelect:$,Icon:Q,Item:U,ItemDescription:N,ItemIndicator:W,ItemLabel:z,Label:Y,Listbox:Z,Portal:ee,Section:_,Trigger:oe,Value:ne});export{p as a,q as b,$ as c,Q as d,Y as e,Z as f,ee as g,te as h,oe as i,ne as j,Kt as k,kt as l};
