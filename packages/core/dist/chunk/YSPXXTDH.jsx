import{c as I,f as D}from"./I2GXMTLG.jsx";import{a as Y}from"./HRP3PVHU.jsx";import{a as j}from"./OYIYGTZT.jsx";import{a as q}from"./LD6VFCOU.jsx";import{a as G}from"./HAEWETXL.jsx";import{a as pe}from"./XWCF3RNR.jsx";var Ve={};pe(Ve,{Arrow:()=>I,Content:()=>U,Portal:()=>X,Root:()=>B,Tooltip:()=>Je,Trigger:()=>N,useTooltipContext:()=>f});import{mergeDefaultProps as ae,mergeRefs as ce}from"@kobalte/utils";import{Show as Te,createEffect as ge,onCleanup as Pe,splitProps as ye}from"solid-js";import{combineStyle as Ce}from"@solid-primitives/props";import{createContext as se,useContext as le}from"solid-js";var F=se();function f(){let c=le(F);if(c===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return c}function U(c){let p=f(),n=ae({id:p.generateId("content")},c),[s,t]=ye(n,["ref","style"]);return ge(()=>Pe(p.registerContentId(t.id))),<Te when={p.contentPresent()}><D.Positioner><Y ref={ce(o=>{p.setContentRef(o)},s.ref)}role="tooltip"disableOutsidePointerEvents={!1}style={Ce({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},s.style)}onFocusOutside={o=>o.preventDefault()}onDismiss={()=>p.hideTooltip(!0)}{...p.dataset()}{...t}/></D.Positioner></Te>}import{Show as Ee}from"solid-js";import{Portal as Oe}from"solid-js/web";function X(c){let p=f();return<Ee when={p.contentPresent()}><Oe{...c}/></Ee>}import{contains as J,createGenerateId as be,getDocument as we,getEventPoint as xe,getWindow as De,isPointInPolygon as Re,mergeDefaultProps as Se}from"@kobalte/utils";import{createEffect as Q,createMemo as He,createSignal as R,createUniqueId as Le,onCleanup as V,splitProps as Ae}from"solid-js";import{isServer as P}from"solid-js/web";import Me from"solid-presence";function z(c,p,n){let s=c.split("-")[0],t=p.getBoundingClientRect(),o=n.getBoundingClientRect(),e=[],l=t.left+t.width/2,d=t.top+t.height/2;switch(s){case"top":e.push([t.left,d]),e.push([o.left,o.bottom]),e.push([o.left,o.top]),e.push([o.right,o.top]),e.push([o.right,o.bottom]),e.push([t.right,d]);break;case"right":e.push([l,t.top]),e.push([o.left,o.top]),e.push([o.right,o.top]),e.push([o.right,o.bottom]),e.push([o.left,o.bottom]),e.push([l,t.bottom]);break;case"bottom":e.push([t.left,d]),e.push([o.left,o.top]),e.push([o.left,o.bottom]),e.push([o.right,o.bottom]),e.push([o.right,o.top]),e.push([t.right,d]);break;case"left":e.push([l,t.top]),e.push([o.right,o.top]),e.push([o.left,o.top]),e.push([o.left,o.bottom]),e.push([o.right,o.bottom]),e.push([l,t.bottom]);break}return e}var y={},ke=0,h=!1,m,b,E;function B(c){let p=`tooltip-${Le()}`,n=`${++ke}`,s=Se({id:p,openDelay:700,closeDelay:300,skipDelayDuration:300},c),[t,o]=Ae(s,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]),e,[l,d]=R(),[T,O]=R(),[C,S]=R(),[H,L]=R(o.placement),a=j({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:i=>t.onOpenChange?.(i)}),{present:A}=Me({show:()=>t.forceMount||a.isOpen(),element:()=>C()??null}),r=()=>{y[n]=x},w=()=>{for(let i in y)i!==n&&(y[i](!0),delete y[i])},x=(i=!1)=>{P||(i||t.closeDelay&&t.closeDelay<=0?(window.clearTimeout(e),e=void 0,a.close()):e||(e=window.setTimeout(()=>{e=void 0,a.close()},t.closeDelay)),window.clearTimeout(m),m=void 0,t.skipDelayDuration&&t.skipDelayDuration>=0&&(E=window.setTimeout(()=>{window.clearTimeout(E),E=void 0},t.skipDelayDuration)),h&&(window.clearTimeout(b),b=window.setTimeout(()=>{delete y[n],b=void 0,h=!1},t.closeDelay)))},M=()=>{P||(clearTimeout(e),e=void 0,w(),r(),h=!0,a.open(),window.clearTimeout(m),m=void 0,window.clearTimeout(b),b=void 0,window.clearTimeout(E),E=void 0)},_=()=>{P||(w(),r(),!a.isOpen()&&!m&&!h?m=window.setTimeout(()=>{m=void 0,h=!0,M()},t.openDelay):a.isOpen()||M())},ee=(i=!1)=>{P||(!i&&t.openDelay&&t.openDelay>0&&!e&&!E?_():M())},oe=()=>{P||(window.clearTimeout(m),m=void 0,h=!1)},W=()=>{P||(window.clearTimeout(e),e=void 0)},K=i=>J(T(),i)||J(C(),i),te=i=>{let g=T(),u=C();if(!(!g||!u))return z(i,g,u)},$=i=>{let g=i.target;if(K(g)){W();return}if(!t.ignoreSafeArea){let u=te(H());if(u&&Re(xe(i),u)){W();return}}e||x()};Q(()=>{if(P||!a.isOpen())return;let i=we();i.addEventListener("pointermove",$,!0),V(()=>{i.removeEventListener("pointermove",$,!0)})}),Q(()=>{let i=T();if(!i||!a.isOpen())return;let g=re=>{let ie=re.target;J(ie,i)&&x(!0)},u=De();u.addEventListener("scroll",g,{capture:!0}),V(()=>{u.removeEventListener("scroll",g,{capture:!0})})}),V(()=>{clearTimeout(e),y[n]&&delete y[n]});let ne={dataset:He(()=>({"data-expanded":a.isOpen()?"":void 0,"data-closed":a.isOpen()?void 0:""})),isOpen:a.isOpen,isDisabled:()=>t.disabled??!1,triggerOnFocusOnly:()=>t.triggerOnFocusOnly??!1,contentId:l,contentPresent:A,openTooltip:ee,hideTooltip:x,cancelOpening:oe,generateId:be(()=>s.id),registerContentId:q(d),isTargetOnTooltip:K,setTriggerRef:O,setContentRef:S};return<F.Provider value={ne}><D anchorRef={T}contentRef={C}onCurrentPlacementChange={L}{...o}/></F.Provider>}import{callHandler as v,getDocument as Z,mergeRefs as Ie}from"@kobalte/utils";import{onCleanup as Fe,splitProps as Ue}from"solid-js";import{isServer as Xe}from"solid-js/web";function N(c){let p,n=f(),[s,t]=Ue(c,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]),o=!1,e=!1,l=!1,d=()=>{o=!1},T=()=>{!n.isOpen()&&(e||l)&&n.openTooltip(l)},O=r=>{n.isOpen()&&!e&&!l&&n.hideTooltip(r)},C=r=>{v(r,s.onPointerEnter),!(r.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||r.defaultPrevented)&&(e=!0,T())},S=r=>{v(r,s.onPointerLeave),r.pointerType!=="touch"&&(e=!1,l=!1,n.isOpen()?O():n.cancelOpening())},H=r=>{v(r,s.onPointerDown),o=!0,Z(p).addEventListener("pointerup",d,{once:!0})},L=r=>{v(r,s.onClick),e=!1,l=!1,O(!0)},a=r=>{v(r,s.onFocus),!(n.isDisabled()||r.defaultPrevented||o)&&(l=!0,T())},A=r=>{v(r,s.onBlur);let w=r.relatedTarget;n.isTargetOnTooltip(w)||(e=!1,l=!1,O(!0))};return Fe(()=>{Xe||Z(p).removeEventListener("pointerup",d)}),<G as="button"ref={Ie(r=>{n.setTriggerRef(r),p=r},s.ref)}aria-describedby={n.isOpen()?n.contentId():void 0}onPointerEnter={C}onPointerLeave={S}onPointerDown={H}onClick={L}onFocus={a}onBlur={A}{...n.dataset()}{...t}/>}var Je=Object.assign(B,{Arrow:I,Content:U,Portal:X,Trigger:N});export{f as a,U as b,X as c,B as d,N as e,Je as f,Ve as g};
