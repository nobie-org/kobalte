import { d as d$1 } from '../chunk/N5XJ4LCX.js';
import { b, a as a$6 } from '../chunk/Q73XX7CS.js';
import { a as a$5, b as b$2 } from '../chunk/UQYWIS72.js';
import { a as a$1 } from '../chunk/PXHAVOZL.js';
export { a as Label } from '../chunk/PXHAVOZL.js';
import { a as a$4 } from '../chunk/3USQYRTZ.js';
import { a } from '../chunk/DBH56JRW.js';
export { a as ErrorMessage } from '../chunk/DBH56JRW.js';
import { e, d, a as a$3, b as b$1, c } from '../chunk/63IHFG6C.js';
export { e as Description } from '../chunk/63IHFG6C.js';
import { g } from '../chunk/UAI26547.js';
import { a as a$7 } from '../chunk/BRRMFPGI.js';
import { a as a$2 } from '../chunk/2B777EKY.js';
import { template, createComponent, mergeProps, spread, memo } from 'solid-js/web';
import { mergeRefs, mergeDefaultProps, createGenerateId, access, callHandler, visuallyHiddenStyles, clamp, snapValueToStep } from '@kobalte/utils';
import { combineStyle } from '@solid-primitives/props';
import { createContext, useContext, splitProps, createSignal, createMemo, createUniqueId, batch } from 'solid-js';

var K=createContext();function R(){let m=useContext(K);if(m===void 0)throw new Error("[kobalte]: `useColorAreaContext` must be used within a `ColorArea` component");return m}function ae(m){let e=R(),c=d(),[g$1,i]=splitProps(m,["style","onPointerDown","onPointerMove","onPointerUp"]),{direction:C}=g(),[x,u]=createSignal(),d$2=n=>{let o=x()||e.backgroundRef().getBoundingClientRect(),p=[0,o.width],y=[e.state.xMinValue(),e.state.xMaxValue()],f=[0,o.height],M=[e.state.yMinValue(),e.state.yMaxValue()],b=d$1(p,y),P=d$1(f,M);return u(o),[b(n.x-o.left),P(n.y-o.top)]},h={x:0,y:0},V=n=>{callHandler(n,g$1.onPointerDown),n.target.setPointerCapture(n.pointerId),n.preventDefault();let p=d$2({x:n.clientX,y:n.clientY});h={x:n.clientX,y:n.clientY},e.onDragStart?.(p);},r=n=>{callHandler(n,g$1.onPointerMove),n.target.hasPointerCapture(n.pointerId)&&(e.onDrag?.({deltaX:n.clientX-h.x,deltaY:n.clientY-h.y}),h={x:n.clientX,y:n.clientY});},a=n=>{callHandler(n,g$1.onPointerUp);let o=n.target;o.hasPointerCapture(n.pointerId)&&(o.releasePointerCapture(n.pointerId),u(void 0),e.onDragEnd?.());},t=createMemo(()=>{let n=C()==="ltr"?"right":"left",o=e.state.value().getChannelValue(e.state.channels().zChannel);switch(e.state.value().getColorSpace()){case"rgb":{let p=b("rgb(0, 0, 0)");return {background:[`linear-gradient(to ${n}, ${p.withChannelValue(e.state.channels().xChannel,0)}, ${p.withChannelValue(e.state.channels().xChannel,255)})`,`linear-gradient(to top, ${p.withChannelValue(e.state.channels().yChannel,0)}, ${p.withChannelValue(e.state.channels().yChannel,255)})`,p.withChannelValue(e.state.channels().zChannel,o)].join(","),"background-blend-mode":"screen"}}case"hsl":{let p=b("hsl(0, 100%, 50%)").withChannelValue(e.state.channels().zChannel,o),y=e.state.value().getColorChannels().filter(f=>f!==e.state.channels().zChannel).map(f=>`linear-gradient(to ${f===e.state.channels().xChannel?n:"top"}, ${$e[f](p)})`).reverse();return e.state.channels().zChannel==="hue"&&y.push(p.toString("css")),{background:y.join(", ")}}case"hsb":{let p=b("hsb(0, 100%, 100%)").withChannelValue(e.state.channels().zChannel,o),y=e.state.value().getColorChannels().filter(f=>f!==e.state.channels().zChannel).map(f=>`linear-gradient(to ${f===e.state.channels().xChannel?n:"top"}, ${Me[f](p)})`).reverse();return e.state.channels().zChannel==="hue"&&y.push(p.toString("css")),{background:y.join(", ")}}}});return createComponent(a$2,mergeProps({as:"div",ref(n){let o=mergeRefs(e.setBackgroundRef,m.ref);typeof o=="function"&&o(n);},get style(){return combineStyle({"touch-action":"none","forced-color-adjust":"none",...t()},g$1.style)},onPointerDown:V,onPointerMove:r,onPointerUp:a},()=>c.dataset(),i))}var se=m=>[0,60,120,180,240,300,360].map(e=>m.withChannelValue("hue",e).toString("css")).join(", "),le=m=>`${m.withChannelValue("saturation",0)}, transparent`,$e={hue:se,saturation:le,lightness:()=>"black, transparent, white"},Me={hue:se,saturation:le,brightness:()=>"black, transparent"};var Oe=template('<input type="range">');function X(m){let e=d(),c=R(),g=mergeDefaultProps({id:c.generateId("input"),orientation:"horizontal"},m),[i,C,x]=splitProps(g,["style","orientation","onChange","onFocus","onBlur"],a$5),{fieldProps:u}=b$2(C),d$1=()=>i.orientation==="vertical",h=()=>[u.ariaLabel(),c.translations().colorPicker].filter(Boolean).join(", "),V=a=>{callHandler(a,i.onChange);let t=a.target;d$1()?c.state.setYValue(Number.parseFloat(t.value)):c.state.setXValue(Number.parseFloat(t.value)),t.value=String(d$1()?c.state.yValue():c.state.xValue())??"";},r=createMemo(()=>{let a=d$1()?c.state.channels().yChannel:c.state.channels().xChannel;return `${c.state.value().getChannelName(a,a$6)} ${c.state.value().formatChannelValue(a)}, ${c.state.value().getColorName(a$6)}`});return (()=>{let a=Oe();return a.addEventListener("change",V),spread(a,mergeProps({get id(){return u.id()},get name(){return (d$1()?c.yName():c.xName())||e.name()},get tabIndex(){return c.state.isDisabled()?void 0:-1},get min(){return memo(()=>!!d$1())()?c.state.yMinValue():c.state.xMinValue()},get max(){return memo(()=>!!d$1())()?c.state.yMaxValue():c.state.xMaxValue()},get step(){return memo(()=>!!d$1())()?c.state.yStep():c.state.xStep()},get value(){return memo(()=>!!d$1())()?c.state.yValue():c.state.xValue()},get required(){return e.isRequired()},get disabled(){return e.isDisabled()},get readonly(){return e.isReadOnly()},get style(){return combineStyle({...visuallyHiddenStyles},i.style)},get"aria-roledescription"(){return c.translations().twoDimensionalSlider},get"aria-valuetext"(){return r()},get"aria-orientation"(){return i.orientation},get"aria-label"(){return h()},get"aria-labelledby"(){return u.ariaLabelledBy()},get"aria-describedby"(){return u.ariaDescribedBy()},get"aria-invalid"(){return e.validationState()==="invalid"||void 0},get"aria-required"(){return e.isRequired()||void 0},get"aria-disabled"(){return e.isDisabled()||void 0},get"aria-readonly"(){return e.isReadOnly()||void 0},get"data-orientation"(){return i.orientation}},()=>e.dataset(),x),!1,!1),a})()}function ie(m){return createComponent(X,m)}function ce(m){return createComponent(X,mergeProps({orientation:"vertical"},m))}var ue={colorPicker:"Color picker",twoDimensionalSlider:"2D slider"};function ge(m){let e=mergeDefaultProps({isDisabled:()=>!1,defaultValue:()=>b("hsl(0, 100%, 50%)")},m),[c,g]=a$7({value:e.value,defaultValue:e.defaultValue,onChange:l=>e.onChange?.(l)}),i=createMemo(()=>e.colorSpace?.()?c().toFormat(e.colorSpace()):c()),C=createMemo(()=>i().getColorSpaceAxes({xChannel:e.xChannel?.(),yChannel:e.yChannel?.()})),x=()=>i().getChannelRange(C().xChannel),u=()=>i().getChannelRange(C().yChannel),d=()=>x().step,h=()=>u().step,V=()=>x().pageSize,r=()=>u().pageSize,a=()=>x().maxValue,t=()=>x().minValue,n=()=>u().maxValue,o=()=>u().minValue,[p,y]=createSignal(!1),f=i(),M=()=>{g(f);},b$1=()=>i().getChannelValue(C().xChannel),P=()=>i().getChannelValue(C().yChannel),N=l=>{l!==b$1()&&g(i().withChannelValue(C().xChannel,l));},A=l=>{l!==P()&&g(i().withChannelValue(C().yChannel,l));},s=(l=1)=>{N(b$1()+l>a()?a():snapValueToStep(b$1()+l,t(),a(),d()));},w=(l=1)=>{A(P()+l>n()?n():snapValueToStep(P()+l,o(),n(),h()));},I=(l=1)=>{N(snapValueToStep(b$1()-l,t(),a(),d()));},L=(l=1)=>{A(snapValueToStep(P()-l,o(),n(),h()));},E=()=>{let l=(b$1()-t())/(a()-t()),S=(n()-(P()-o()))/(n()-o());return {x:l,y:S}},F=()=>{let l=(b$1()-t())/a()-t(),S=(P()-o())/n()-o();return {x:l,y:S}},j=l=>{if(e.isDisabled())return;let S=snapValueToStep(l.x,t(),a(),d()),z=snapValueToStep(l.y,o(),n(),h());batch(()=>{N(S),A(z);});},ye=l=>{j(Pe(l.x,l.y));},be=l=>{let S=Math.round((l.x-t())/d())*d()+t(),z=Math.round((l.y-o())/h())*h()+o();return {x:S,y:z}},Pe=(l,S)=>{let z=l*(a()-t())+t(),Se=S*(n()-o())+o(),q=be({x:z,y:Se});return {x:clamp(q.x,t(),a()),y:clamp(q.y,o(),n())}};return {value:i,xValue:b$1,yValue:P,xStep:d,yStep:h,xPageSize:V,yPageSize:r,xMaxValue:a,yMaxValue:n,xMinValue:t,yMinValue:o,setValue:g,setXValue:N,setYValue:A,incrementX:s,decrementX:I,incrementY:w,decrementY:L,getThumbPosition:E,isDragging:p,setIsDragging:l=>{if(e.isDisabled())return;let S=p();y(l),S&&!p()&&e.onChangeEnd?.(i());},channels:C,resetValue:M,setThumbPercent:ye,setThumbValue:j,getThumbPercent:F,isDisabled:e.isDisabled}}function fe(m){let e,c$1=`colorarea-${createUniqueId()}`,g$1=mergeDefaultProps({id:c$1,translations:ue,disabled:!1,defaultValue:b("hsl(0, 100%, 50%)")},m),[i,C,x]=splitProps(g$1,["ref","value","defaultValue","colorSpace","xChannel","yChannel","onChange","onChangeEnd","translations","xName","yName","disabled"],a$3),{formControlContext:u}=b$1(C),{direction:d}=g(),[h,V]=createSignal(),[r,a]=createSignal(),t=ge({value:()=>i.value,defaultValue:()=>i.defaultValue,onChange:i.onChange,onChangeEnd:i.onChangeEnd,colorSpace:()=>i.colorSpace,xChannel:()=>i.xChannel,yChannel:()=>i.yChannel,isDisabled:()=>u.isDisabled()??!1});a$4(()=>e,()=>t.resetValue());let n=()=>d()==="ltr",o=null,p=s=>{t.setIsDragging(!0),t.setThumbValue({x:s[0],y:A.state.yMaxValue()-s[1]}),o=null;},y=({deltaX:s,deltaY:w})=>{let{width:I,height:L}=h().getBoundingClientRect();o===null&&(o={x:t.getThumbPercent().x*I,y:t.getThumbPercent().y*L}),o.x+=s,o.y+=-w;let E=clamp(o.x/I,0,1),F=clamp(o.y/L,0,1);t.setThumbPercent({x:E,y:F}),i.onChange?.(t.value());},f=()=>{t.setIsDragging(!1),r()?.focus();},M=()=>t.value().withChannelValue("alpha",1),b$2=s=>{u.isDisabled()||(s.preventDefault(),s.stopPropagation(),n()?t.decrementX(t.xPageSize()):t.incrementX(t.xPageSize()));},P=s=>{u.isDisabled()||(s.preventDefault(),s.stopPropagation(),n()?t.incrementX(t.xPageSize()):t.decrementX(t.xPageSize()));},A={state:t,xName:()=>i.xName,yName:()=>i.yName,onDragStart:p,onDrag:y,onDragEnd:f,translations:()=>i.translations,getDisplayColor:M,onStepKeyDown:s=>{if(!u.isDisabled())switch(s.key){case"Left":case"ArrowLeft":s.preventDefault(),s.stopPropagation(),n()?t.decrementX(s.shiftKey?t.xPageSize():t.xStep()):t.incrementX(s.shiftKey?t.xPageSize():t.xStep());break;case"Down":case"ArrowDown":s.preventDefault(),s.stopPropagation(),t.decrementY(s.shiftKey?t.yPageSize():t.yStep());break;case"Up":case"ArrowUp":s.preventDefault(),s.stopPropagation(),t.incrementY(s.shiftKey?t.yPageSize():t.yStep());break;case"Right":case"ArrowRight":s.preventDefault(),s.stopPropagation(),n()?t.incrementX(s.shiftKey?t.xPageSize():t.xStep()):t.decrementX(s.shiftKey?t.xPageSize():t.xStep());break;case"Home":b$2(s);break;case"End":P(s);break;case"PageUp":s.preventDefault(),s.stopPropagation(),t.incrementY(t.yPageSize());break;case"PageDown":s.preventDefault(),s.stopPropagation(),t.decrementY(t.yPageSize());break}},backgroundRef:h,setBackgroundRef:V,thumbRef:r,setThumbRef:a,generateId:createGenerateId(()=>access(C.id))};return createComponent(c.Provider,{value:u,get children(){return createComponent(K.Provider,{value:A,get children(){return createComponent(a$2,mergeProps({as:"div",ref(s){let w=mergeRefs(I=>e=I,i.ref);typeof w=="function"&&w(s);},role:"group",get id(){return access(C.id)}},()=>u.dataset(),x))}})}})}function xe(m){let e=R(),c=d(),[g,i]=splitProps(m,["style","aria-label","onKeyDown","onPointerDown","onPointerMove","onPointerUp"]),C=()=>{let r=e.state.channels().xChannel,a=e.state.channels().yChannel,t=`${e.state.value().getChannelName(r,a$6)} ${e.state.value().formatChannelValue(r)}`,n=`${e.state.value().getChannelName(a,a$6)} ${e.state.value().formatChannelValue(a)}`,o=e.state.value().getColorName(a$6);return g["aria-label"]??[t,n,o].join(", ")},x=r=>{callHandler(r,g.onKeyDown),e.onStepKeyDown(r);},u={x:0,y:0};return createComponent(a$2,mergeProps({as:"span",ref(r){let a=mergeRefs(e.setThumbRef,m.ref);typeof a=="function"&&a(r);},role:"presentation",get tabIndex(){return e.state.isDisabled()?void 0:0},get style(){return combineStyle({position:"absolute",left:`${e.state.getThumbPosition().x*100}%`,top:`${e.state.getThumbPosition().y*100}%`,transform:"translate(-50%, -50%)","forced-color-adjust":"none","touch-action":"none","--kb-color-current":e.state.value().toString()},g.style)},get"aria-label"(){return C()},onKeyDown:x,onPointerDown:r=>{callHandler(r,g.onPointerDown);let a=r.currentTarget;r.preventDefault(),r.stopPropagation(),a.setPointerCapture(r.pointerId),a.focus(),u={x:r.clientX,y:r.clientY},e.onDragStart?.([e.state.xValue(),e.state.yMaxValue()-e.state.yValue()]);},onPointerMove:r=>{if(r.stopPropagation(),callHandler(r,g.onPointerMove),r.currentTarget.hasPointerCapture(r.pointerId)){let t={deltaX:r.clientX-u.x,deltaY:r.clientY-u.y};e.onDrag?.(t),u={x:r.clientX,y:r.clientY};}},onPointerUp:r=>{r.stopPropagation(),callHandler(r,g.onPointerUp);let a=r.currentTarget;a.hasPointerCapture(r.pointerId)&&(a.releasePointerCapture(r.pointerId),e.onDragEnd?.());}},()=>c.dataset(),i))}var Dn=Object.assign(fe,{Description:e,ErrorMessage:a,Label:a$1,Background:ae,Thumb:xe,HiddenInputX:ie,HiddenInputY:ce});

export { ae as Background, Dn as ColorArea, ie as HiddenInputX, ce as HiddenInputY, fe as Root, xe as Thumb, R as useColorAreaContext };
