import{a as E,b as T}from"../chunk/WZF3RE4B.jsx";import{d as Y}from"../chunk/Z74EZM6S.jsx";import{a as Z,b as ee}from"../chunk/YU3BENDD.jsx";import{a as Ae}from"../chunk/MYEAQNC4.jsx";import{a as q}from"../chunk/RQL65DCQ.jsx";import{a as Pe}from"../chunk/27VXZQWW.jsx";import{a as G,b as Q,c as W,d as D,e as Ce}from"../chunk/HIUHMFLS.jsx";import{g as w}from"../chunk/ZSYY5OQU.jsx";import"../chunk/LD6VFCOU.jsx";import{a as j}from"../chunk/A5YUKSV6.jsx";import"../chunk/DOLTULMA.jsx";import{a as R}from"../chunk/HAEWETXL.jsx";import"../chunk/XWCF3RNR.jsx";import{callHandler as J,mergeRefs as Ye}from"@kobalte/utils";import{combineStyle as Ke}from"@solid-primitives/props";import{createMemo as Je,createSignal as _e,splitProps as $e}from"solid-js";import{createContext as ze,useContext as Ue}from"solid-js";var K=ze();function V(){let u=Ue(K);if(u===void 0)throw new Error("[kobalte]: `useColorAreaContext` must be used within a `ColorArea` component");return u}function Se(u){let e=V(),i=D(),[d,s]=$e(u,["style","onPointerDown","onPointerMove","onPointerUp"]),{direction:h}=w(),[P,c]=_e(),m=n=>{let r=P()||e.backgroundRef().getBoundingClientRect(),C=[0,r.width],f=[e.state.xMinValue(),e.state.xMaxValue()],y=[0,r.height],L=[e.state.yMinValue(),e.state.yMaxValue()],b=Y(C,f),x=Y(y,L);return c(r),[b(n.x-r.left),x(n.y-r.top)]},g={x:0,y:0},S=n=>{J(n,d.onPointerDown),n.target.setPointerCapture(n.pointerId),n.preventDefault();let C=m({x:n.clientX,y:n.clientY});g={x:n.clientX,y:n.clientY},e.onDragStart?.(C)},t=n=>{J(n,d.onPointerMove),n.target.hasPointerCapture(n.pointerId)&&(e.onDrag?.({deltaX:n.clientX-g.x,deltaY:n.clientY-g.y}),g={x:n.clientX,y:n.clientY})},p=n=>{J(n,d.onPointerUp);let r=n.target;r.hasPointerCapture(n.pointerId)&&(r.releasePointerCapture(n.pointerId),c(void 0),e.onDragEnd?.())},o=Je(()=>{let n=h()==="ltr"?"right":"left",r=e.state.value().getChannelValue(e.state.channels().zChannel);switch(e.state.value().getColorSpace()){case"rgb":{let C=T("rgb(0, 0, 0)");return{background:[`linear-gradient(to ${n}, ${C.withChannelValue(e.state.channels().xChannel,0)}, ${C.withChannelValue(e.state.channels().xChannel,255)})`,`linear-gradient(to top, ${C.withChannelValue(e.state.channels().yChannel,0)}, ${C.withChannelValue(e.state.channels().yChannel,255)})`,C.withChannelValue(e.state.channels().zChannel,r)].join(","),"background-blend-mode":"screen"}}case"hsl":{let C=T("hsl(0, 100%, 50%)").withChannelValue(e.state.channels().zChannel,r),f=e.state.value().getColorChannels().filter(y=>y!==e.state.channels().zChannel).map(y=>`linear-gradient(to ${y===e.state.channels().xChannel?n:"top"}, ${je[y](C)})`).reverse();return e.state.channels().zChannel==="hue"&&f.push(C.toString("css")),{background:f.join(", ")}}case"hsb":{let C=T("hsb(0, 100%, 100%)").withChannelValue(e.state.channels().zChannel,r),f=e.state.value().getColorChannels().filter(y=>y!==e.state.channels().zChannel).map(y=>`linear-gradient(to ${y===e.state.channels().xChannel?n:"top"}, ${qe[y](C)})`).reverse();return e.state.channels().zChannel==="hue"&&f.push(C.toString("css")),{background:f.join(", ")}}}});return<R as="div"ref={Ye(e.setBackgroundRef,u.ref)}style={Ke({"touch-action":"none","forced-color-adjust":"none",...o()},d.style)}onPointerDown={S}onPointerMove={t}onPointerUp={p}{...i.dataset()}{...s}/>}var Te=u=>[0,60,120,180,240,300,360].map(e=>u.withChannelValue("hue",e).toString("css")).join(", "),ve=u=>`${u.withChannelValue("saturation",0)}, transparent`,je={hue:Te,saturation:ve,lightness:()=>"black, transparent, white"},qe={hue:Te,saturation:ve,brightness:()=>"black, transparent"};import{callHandler as Ge,mergeDefaultProps as Qe,visuallyHiddenStyles as We}from"@kobalte/utils";import{combineStyle as Ze}from"@solid-primitives/props";import{createMemo as eo,splitProps as oo}from"solid-js";function N(u){let e=D(),i=V(),d=Qe({id:i.generateId("input"),orientation:"horizontal"},u),[s,h,P]=oo(d,["style","orientation","onChange","onFocus","onBlur"],Z),{fieldProps:c}=ee(h),m=()=>s.orientation==="vertical",g=()=>[c.ariaLabel(),i.translations().colorPicker].filter(Boolean).join(", "),S=p=>{Ge(p,s.onChange);let o=p.target;m()?i.state.setYValue(Number.parseFloat(o.value)):i.state.setXValue(Number.parseFloat(o.value)),o.value=String(m()?i.state.yValue():i.state.xValue())??""},t=eo(()=>{let p=m()?i.state.channels().yChannel:i.state.channels().xChannel;return`${i.state.value().getChannelName(p,E)} ${i.state.value().formatChannelValue(p)}, ${i.state.value().getColorName(E)}`});return<input type="range"id={c.id()}name={(m()?i.yName():i.xName())||e.name()}tabIndex={i.state.isDisabled()?void 0:-1}min={m()?i.state.yMinValue():i.state.xMinValue()}max={m()?i.state.yMaxValue():i.state.xMaxValue()}step={m()?i.state.yStep():i.state.xStep()}value={m()?i.state.yValue():i.state.xValue()}required={e.isRequired()}disabled={e.isDisabled()}readonly={e.isReadOnly()}style={Ze({...We},s.style)}aria-roledescription={i.translations().twoDimensionalSlider}aria-valuetext={t()}aria-orientation={s.orientation}aria-label={g()}aria-labelledby={c.ariaLabelledBy()}aria-describedby={c.ariaDescribedBy()}aria-invalid={e.validationState()==="invalid"||void 0}aria-required={e.isRequired()||void 0}aria-disabled={e.isDisabled()||void 0}aria-readonly={e.isReadOnly()||void 0}data-orientation={s.orientation}onChange={S}{...e.dataset()}{...P}/>}function Ee(u){return<N{...u}/>}function Ve(u){return<N orientation="vertical"{...u}/>}import{access as He,clamp as Ie,createGenerateId as ao,mergeDefaultProps as lo,mergeRefs as so}from"@kobalte/utils";import{createSignal as Oe,createUniqueId as io,splitProps as po}from"solid-js";var De={colorPicker:"Color picker",twoDimensionalSlider:"2D slider"};import{clamp as Re,mergeDefaultProps as no,snapValueToStep as M}from"@kobalte/utils";import{batch as ro,createMemo as Me,createSignal as to}from"solid-js";function Le(u){let e=no({isDisabled:()=>!1,defaultValue:()=>T("hsl(0, 100%, 50%)")},u),[i,d]=j({value:e.value,defaultValue:e.defaultValue,onChange:l=>e.onChange?.(l)}),s=Me(()=>e.colorSpace?.()?i().toFormat(e.colorSpace()):i()),h=Me(()=>s().getColorSpaceAxes({xChannel:e.xChannel?.(),yChannel:e.yChannel?.()})),P=()=>s().getChannelRange(h().xChannel),c=()=>s().getChannelRange(h().yChannel),m=()=>P().step,g=()=>c().step,S=()=>P().pageSize,t=()=>c().pageSize,p=()=>P().maxValue,o=()=>P().minValue,n=()=>c().maxValue,r=()=>c().minValue,[C,f]=to(!1),y=s(),L=()=>{d(y)},b=()=>s().getChannelValue(h().xChannel),x=()=>s().getChannelValue(h().yChannel),H=l=>{l!==b()&&d(s().withChannelValue(h().xChannel,l))},v=l=>{l!==x()&&d(s().withChannelValue(h().yChannel,l))},a=(l=1)=>{H(b()+l>p()?p():M(b()+l,o(),p(),m()))},B=(l=1)=>{v(x()+l>n()?n():M(x()+l,r(),n(),g()))},O=(l=1)=>{H(M(b()-l,o(),p(),m()))},X=(l=1)=>{v(M(x()-l,r(),n(),g()))},z=()=>{let l=(b()-o())/(p()-o()),A=(n()-(x()-r()))/(n()-r());return{x:l,y:A}},U=()=>{let l=(b()-o())/p()-o(),A=(x()-r())/n()-r();return{x:l,y:A}},_=l=>{if(e.isDisabled())return;let A=M(l.x,o(),p(),m()),I=M(l.y,r(),n(),g());ro(()=>{H(A),v(I)})},ke=l=>{_(Fe(l.x,l.y))},Ne=l=>{let A=Math.round((l.x-o())/m())*m()+o(),I=Math.round((l.y-r())/g())*g()+r();return{x:A,y:I}},Fe=(l,A)=>{let I=l*(p()-o())+o(),Be=A*(n()-r())+r(),$=Ne({x:I,y:Be});return{x:Re($.x,o(),p()),y:Re($.y,r(),n())}};return{value:s,xValue:b,yValue:x,xStep:m,yStep:g,xPageSize:S,yPageSize:t,xMaxValue:p,yMaxValue:n,xMinValue:o,yMinValue:r,setValue:d,setXValue:H,setYValue:v,incrementX:a,decrementX:O,incrementY:B,decrementY:X,getThumbPosition:z,isDragging:C,setIsDragging:l=>{if(e.isDisabled())return;let A=C();f(l),A&&!C()&&e.onChangeEnd?.(s())},channels:h,resetValue:L,setThumbPercent:ke,setThumbValue:_,getThumbPercent:U,isDisabled:e.isDisabled}}function Xe(u){let e,i=`colorarea-${io()}`,d=lo({id:i,translations:De,disabled:!1,defaultValue:T("hsl(0, 100%, 50%)")},u),[s,h,P]=po(d,["ref","value","defaultValue","colorSpace","xChannel","yChannel","onChange","onChangeEnd","translations","xName","yName","disabled"],G),{formControlContext:c}=Q(h),{direction:m}=w(),[g,S]=Oe(),[t,p]=Oe(),o=Le({value:()=>s.value,defaultValue:()=>s.defaultValue,onChange:s.onChange,onChangeEnd:s.onChangeEnd,colorSpace:()=>s.colorSpace,xChannel:()=>s.xChannel,yChannel:()=>s.yChannel,isDisabled:()=>c.isDisabled()??!1});q(()=>e,()=>o.resetValue());let n=()=>m()==="ltr",r=null,C=a=>{o.setIsDragging(!0),o.setThumbValue({x:a[0],y:v.state.yMaxValue()-a[1]}),r=null},f=({deltaX:a,deltaY:B})=>{let{width:O,height:X}=g().getBoundingClientRect();r===null&&(r={x:o.getThumbPercent().x*O,y:o.getThumbPercent().y*X}),r.x+=a,r.y+=-B;let z=Ie(r.x/O,0,1),U=Ie(r.y/X,0,1);o.setThumbPercent({x:z,y:U}),s.onChange?.(o.value())},y=()=>{o.setIsDragging(!1),t()?.focus()},L=()=>o.value().withChannelValue("alpha",1),b=a=>{c.isDisabled()||(a.preventDefault(),a.stopPropagation(),n()?o.decrementX(o.xPageSize()):o.incrementX(o.xPageSize()))},x=a=>{c.isDisabled()||(a.preventDefault(),a.stopPropagation(),n()?o.incrementX(o.xPageSize()):o.decrementX(o.xPageSize()))},v={state:o,xName:()=>s.xName,yName:()=>s.yName,onDragStart:C,onDrag:f,onDragEnd:y,translations:()=>s.translations,getDisplayColor:L,onStepKeyDown:a=>{if(!c.isDisabled())switch(a.key){case"Left":case"ArrowLeft":a.preventDefault(),a.stopPropagation(),n()?o.decrementX(a.shiftKey?o.xPageSize():o.xStep()):o.incrementX(a.shiftKey?o.xPageSize():o.xStep());break;case"Down":case"ArrowDown":a.preventDefault(),a.stopPropagation(),o.decrementY(a.shiftKey?o.yPageSize():o.yStep());break;case"Up":case"ArrowUp":a.preventDefault(),a.stopPropagation(),o.incrementY(a.shiftKey?o.yPageSize():o.yStep());break;case"Right":case"ArrowRight":a.preventDefault(),a.stopPropagation(),n()?o.incrementX(a.shiftKey?o.xPageSize():o.xStep()):o.decrementX(a.shiftKey?o.xPageSize():o.xStep());break;case"Home":b(a);break;case"End":x(a);break;case"PageUp":a.preventDefault(),a.stopPropagation(),o.incrementY(o.yPageSize());break;case"PageDown":a.preventDefault(),a.stopPropagation(),o.decrementY(o.yPageSize());break}},backgroundRef:g,setBackgroundRef:S,thumbRef:t,setThumbRef:p,generateId:ao(()=>He(h.id))};return<W.Provider value={c}><K.Provider value={v}><R as="div"ref={so(a=>e=a,s.ref)}role="group"id={He(h.id)}{...c.dataset()}{...P}/></K.Provider></W.Provider>}import{callHandler as F,mergeRefs as co}from"@kobalte/utils";import{combineStyle as uo}from"@solid-primitives/props";import{splitProps as mo}from"solid-js";function we(u){let e=V(),i=D(),[d,s]=mo(u,["style","aria-label","onKeyDown","onPointerDown","onPointerMove","onPointerUp"]),h=()=>{let t=e.state.channels().xChannel,p=e.state.channels().yChannel,o=`${e.state.value().getChannelName(t,E)} ${e.state.value().formatChannelValue(t)}`,n=`${e.state.value().getChannelName(p,E)} ${e.state.value().formatChannelValue(p)}`,r=e.state.value().getColorName(E);return d["aria-label"]??[o,n,r].join(", ")},P=t=>{F(t,d.onKeyDown),e.onStepKeyDown(t)},c={x:0,y:0},m=t=>{F(t,d.onPointerDown);let p=t.currentTarget;t.preventDefault(),t.stopPropagation(),p.setPointerCapture(t.pointerId),p.focus(),c={x:t.clientX,y:t.clientY},e.onDragStart?.([e.state.xValue(),e.state.yMaxValue()-e.state.yValue()])},g=t=>{if(t.stopPropagation(),F(t,d.onPointerMove),t.currentTarget.hasPointerCapture(t.pointerId)){let o={deltaX:t.clientX-c.x,deltaY:t.clientY-c.y};e.onDrag?.(o),c={x:t.clientX,y:t.clientY}}},S=t=>{t.stopPropagation(),F(t,d.onPointerUp);let p=t.currentTarget;p.hasPointerCapture(t.pointerId)&&(p.releasePointerCapture(t.pointerId),e.onDragEnd?.())};return<R as="span"ref={co(e.setThumbRef,u.ref)}role="presentation"tabIndex={e.state.isDisabled()?void 0:0}style={uo({position:"absolute",left:`${e.state.getThumbPosition().x*100}%`,top:`${e.state.getThumbPosition().y*100}%`,transform:"translate(-50%, -50%)","forced-color-adjust":"none","touch-action":"none","--kb-color-current":e.state.value().toString()},d.style)}aria-label={h()}onKeyDown={P}onPointerDown={m}onPointerMove={g}onPointerUp={S}{...i.dataset()}{...s}/>}var hn=Object.assign(Xe,{Description:Ce,ErrorMessage:Pe,Label:Ae,Background:Se,Thumb:we,HiddenInputX:Ee,HiddenInputY:Ve});export{Se as Background,hn as ColorArea,Ce as Description,Pe as ErrorMessage,Ee as HiddenInputX,Ve as HiddenInputY,Ae as Label,Xe as Root,we as Thumb,V as useColorAreaContext};
