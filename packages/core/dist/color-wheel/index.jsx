import{a as B}from"../chunk/A2YOJ5BB.jsx";import{a as $,b as q}from"../chunk/WZF3RE4B.jsx";import{a as L,b as v}from"../chunk/YU3BENDD.jsx";import{a as Y}from"../chunk/MYEAQNC4.jsx";import{a as X}from"../chunk/RQL65DCQ.jsx";import{a as _}from"../chunk/27VXZQWW.jsx";import{a as A,b as U,c as J,d as x,e as K}from"../chunk/HIUHMFLS.jsx";import{g as N}from"../chunk/ZSYY5OQU.jsx";import"../chunk/LD6VFCOU.jsx";import{a as I}from"../chunk/A5YUKSV6.jsx";import"../chunk/DOLTULMA.jsx";import{a as E}from"../chunk/HAEWETXL.jsx";import"../chunk/XWCF3RNR.jsx";import{callHandler as de,mergeDefaultProps as Ce,visuallyHiddenStyles as he}from"@kobalte/utils";import{splitProps as be}from"solid-js";import{combineStyle as Pe}from"@solid-primitives/props";import{createContext as ue,useContext as ce}from"solid-js";var H=ue();function T(){let n=ce(H);if(n===void 0)throw new Error("[kobalte]: `useColorWheelContext` must be used within a `ColorWheel` component");return n}function j(n){let e=x(),a=T(),c=Ce({id:a.generateId("input")},n),[p,s,h]=be(c,["style","onChange"],L),{fieldProps:m}=v(s),d=f=>{de(f,p.onChange);let b=f.target;a.state.setHue(Number.parseFloat(b.value)),b.value=String(a.state.hue())??""};return<input type="range"id={m.id()}name={e.name()}tabIndex={a.state.isDisabled()?void 0:-1}min={a.state.minValue()}max={a.state.maxValue()}step={a.state.step()}value={a.state.hue()}required={e.isRequired()}disabled={e.isDisabled()}readonly={e.isReadOnly()}style={Pe({...he},p.style)}aria-valuetext={a.getThumbValueLabel()}aria-label={m.ariaLabel()}aria-labelledby={m.ariaLabelledBy()}aria-describedby={m.ariaDescribedBy()}aria-invalid={e.validationState()==="invalid"||void 0}aria-required={e.isRequired()||void 0}aria-disabled={e.isDisabled()||void 0}aria-readonly={e.isReadOnly()||void 0}onChange={d}{...e.dataset()}{...h}/>}import{access as te,createGenerateId as We,mergeDefaultProps as xe,mergeRefs as Ee}from"@kobalte/utils";import{createMemo as De,createSignal as O,createUniqueId as Re,splitProps as Le}from"solid-js";import{mergeDefaultProps as ye}from"@kobalte/utils";import{createMemo as ee,createSignal as Te}from"solid-js";function S(n,e){return Math.round(n/e)*e}function V(n,e){return(n%e+e)%e}function G(n){let e=Math.floor(n);return e===n?n-1:e}function fe(n){return n*Math.PI/180}function ge(n){return n*180/Math.PI}function Q(n,e){let a=fe(360-n+90),c=Math.sin(a)*e,p=Math.cos(a)*e;return{x:c,y:p}}function Z(n,e,a){return(ge(Math.atan2(e/a,n/a))+360)%360}function oe(n){let e=ye({isDisabled:()=>!1},n),a=ee(()=>e.defaultValue()??q("hsl(0, 100%, 50%)")),[c,p]=I({value:e.value,defaultValue:a,onChange:C=>e.onChange?.(C)}),s=ee(()=>{let C=c().getColorSpace();return C==="hsl"||C==="hsb"?c():c().toFormat("hsl")}),h=()=>s().getChannelRange("hue"),m=()=>h().step,d=()=>h().pageSize,f=()=>h().maxValue,b=()=>h().minValue,[y,g]=Te(!1),l=()=>{p(a())},i=()=>s().getChannelValue("hue"),P=C=>{let u=C>360?0:C;u=S(V(u,360),m()),i()!==u&&p(s().withChannelValue("hue",u))};return{value:s,setValue:p,hue:i,setHue:P,step:m,pageSize:d,maxValue:f,minValue:b,increment:(C=1)=>{let u=Math.max(C,m()),R=i()+u;R>=f()&&(R=b()),P(S(V(R,360),u))},decrement:(C=1)=>{let u=Math.max(C,m());i()===0?P(G(360/u)*u):P(S(V(i()-u,360),u))},getThumbPosition:()=>Q(i(),e.thumbRadius()),setThumbValue:(C,u,R)=>{e.isDisabled()||P(Z(C,u,R))},isDragging:y,setIsDragging:C=>{if(e.isDisabled())return;let u=y();g(C),u&&!y()&&e.onChangeEnd?.(s())},resetValue:l,isDisabled:e.isDisabled}}function re(n){let[e,a]=O(),c=`colorwheel-${Re()}`,p=xe({id:c,getValueLabel:t=>t.formatChannelValue("hue"),translations:$,disabled:!1,thickness:30},n),[s,h,m]=Le(p,["ref","value","defaultValue","thickness","onChange","onChangeEnd","getValueLabel","translations","disabled"],A),{formControlContext:d}=U(h),{direction:f}=N(),[b,y]=O(),[g,l]=O(),i=B(b),P=De(()=>{if(i.width()!==0)return i.width()/2}),r=()=>(139.75-s.thickness/100*70)*P()/140,o=oe({value:()=>s.value,defaultValue:()=>s.defaultValue,thumbRadius:r,onChange:s.onChange,onChangeEnd:s.onChangeEnd,isDisabled:()=>d.isDisabled()??!1});X(e,()=>o.resetValue());let D=()=>f()==="ltr",W=null,w=t=>{o.setIsDragging(!0),o.setThumbValue(t[0],t[1],Math.sqrt(t[0]*t[0]+t[1]*t[1])),W=null},C=({deltaX:t,deltaY:me})=>{W===null&&(W=o.getThumbPosition()),W.x+=t,W.y+=me,o.setThumbValue(W.x,W.y,r()),s.onChange?.(o.value())},u=()=>{o.setIsDragging(!1),g()?.focus()},R=()=>`${o.value().formatChannelValue("hue")}, ${F.state.value().getHueName(s.translations)}`,se=t=>{d.isDisabled()||(t.preventDefault(),t.stopPropagation(),o.setHue(o.minValue()))},ie=t=>{d.isDisabled()||(t.preventDefault(),t.stopPropagation(),o.setHue(o.maxValue()))},pe=t=>{if(!d.isDisabled())switch(t.key){case"Left":case"ArrowLeft":t.preventDefault(),t.stopPropagation(),D()?o.decrement(t.shiftKey?o.pageSize():o.step()):o.increment(t.shiftKey?o.pageSize():o.step());break;case"Down":case"ArrowDown":t.preventDefault(),t.stopPropagation(),o.decrement(t.shiftKey?o.pageSize():o.step());break;case"Up":case"ArrowUp":t.preventDefault(),t.stopPropagation(),o.increment(t.shiftKey?o.pageSize():o.step());break;case"Right":case"ArrowRight":t.preventDefault(),t.stopPropagation(),D()?o.increment(t.shiftKey?o.pageSize():o.step()):o.decrement(t.shiftKey?o.pageSize():o.step());break;case"Home":se(t);break;case"End":ie(t);break;case"PageUp":t.preventDefault(),t.stopPropagation(),o.increment(o.pageSize());break;case"PageDown":t.preventDefault(),t.stopPropagation(),o.decrement(o.pageSize());break}},F={state:o,outerRadius:P,thickness:()=>s.thickness,onDragStart:w,onDrag:C,onDragEnd:u,getThumbValueLabel:R,getValueLabel:s.getValueLabel,onStepKeyDown:pe,trackRef:b,setTrackRef:y,thumbRef:g,setThumbRef:l,generateId:We(()=>te(h.id))};return<J.Provider value={d}><H.Provider value={F}><E as="div"ref={Ee(a,s.ref)}role="group"id={te(h.id)}{...d.dataset()}{...m}/></H.Provider></J.Provider>}import{callHandler as M,mergeDefaultProps as ve,mergeRefs as Se}from"@kobalte/utils";import{combineStyle as Ve}from"@solid-primitives/props";import{createSignal as Me,splitProps as He}from"solid-js";function ne(n){let e=T(),a=x(),c=ve({id:e.generateId("thumb")},n),[p,s,h]=He(c,["style","onKeyDown","onPointerDown","onPointerMove","onPointerUp"],L),{fieldProps:m}=v(s),d=r=>{M(r,p.onKeyDown),e.onStepKeyDown(r)},[f,b]=Me(),y=r=>{let o=f()||e.trackRef().getBoundingClientRect();return b(o),[r.x-o.left-o.width/2,r.y-o.top-o.height/2]},g={x:0,y:0},l=r=>{M(r,p.onPointerDown);let o=r.currentTarget;r.preventDefault(),r.stopPropagation(),o.setPointerCapture(r.pointerId),o.focus();let D=y({x:r.clientX,y:r.clientY});g={x:r.clientX,y:r.clientY},e.onDragStart?.(D)},i=r=>{if(r.stopPropagation(),M(r,p.onPointerMove),r.currentTarget.hasPointerCapture(r.pointerId)){let D={deltaX:r.clientX-g.x,deltaY:r.clientY-g.y};e.onDrag?.(D),g={x:r.clientX,y:r.clientY}}},P=r=>{r.stopPropagation(),M(r,p.onPointerUp);let o=r.currentTarget;o.hasPointerCapture(r.pointerId)&&(o.releasePointerCapture(r.pointerId),e.onDragEnd?.())};return<E as="span"ref={Se(e.setThumbRef,n.ref)}role="slider"id={m.id()}tabIndex={e.state.isDisabled()?void 0:0}style={Ve({position:"absolute",left:`${e.outerRadius()+e.state.getThumbPosition().x}px`,top:`${e.outerRadius()+e.state.getThumbPosition().y}px`,transform:"translate(-50%, -50%)","forced-color-adjust":"none","touch-action":"none",opacity:e.outerRadius()?1:0,transition:"opacity .1s linear","--kb-color-current":e.state.value().toString()},p.style)}aria-valuetext={e.getThumbValueLabel()}aria-valuemin={e.state.minValue()}aria-valuenow={e.state.hue()}aria-valuemax={e.state.maxValue()}aria-label={m.ariaLabel()}aria-labelledby={m.ariaLabelledBy()}aria-describedby={m.ariaDescribedBy()}onKeyDown={d}onPointerDown={l}onPointerMove={i}onPointerUp={P}{...a.dataset()}{...h}/>}import{callHandler as k,mergeRefs as Oe}from"@kobalte/utils";import{combineStyle as ke}from"@solid-primitives/props";import{createSignal as we,splitProps as Fe}from"solid-js";function le(n){let e=T(),a=x(),[c,p]=Fe(n,["style","onPointerDown","onPointerMove","onPointerUp"]),[s,h]=we(),m=l=>{let i=s()||e.trackRef().getBoundingClientRect();return h(i),[l.x-i.left-i.width/2,l.y-i.top-i.height/2]},d={x:0,y:0},f=l=>{k(l,c.onPointerDown),l.target.setPointerCapture(l.pointerId),l.preventDefault();let P=m({x:l.clientX,y:l.clientY});d={x:l.clientX,y:l.clientY},e.onDragStart?.(P)},b=l=>{k(l,c.onPointerMove),l.target.hasPointerCapture(l.pointerId)&&(e.onDrag?.({deltaX:l.clientX-d.x,deltaY:l.clientY-d.y}),d={x:l.clientX,y:l.clientY})},y=l=>{k(l,c.onPointerUp);let i=l.target;i.hasPointerCapture(l.pointerId)&&(i.releasePointerCapture(l.pointerId),h(void 0),e.onDragEnd?.())},g=`
      conic-gradient(
        from 90deg,
				${[...Array(13).keys()].map(l=>`hsl(${l*30} 100% 50%)`).join(",")}
      )
    `;return<E as="div"ref={Oe(e.setTrackRef,n.ref)}style={ke({"touch-action":"none","forced-color-adjust":"none",background:g,"clip-path":"circle(50%)",mask:`radial-gradient(#0000 ${70-e.thickness()/100*70}%, #000 ${70.5-e.thickness()/100*70}%)`},c.style)}onPointerDown={f}onPointerMove={b}onPointerUp={y}{...a.dataset()}{...p}/>}function ae(n){let e=T(),a=x();return<E as="div"{...a.dataset()}{...n}>{e.getValueLabel(e.state.value())}</E>}var Fo=Object.assign(re,{Description:K,ErrorMessage:_,Input:j,Label:Y,Thumb:ne,Track:le,ValueLabel:ae});export{Fo as ColorWheel,K as Description,_ as ErrorMessage,j as Input,Y as Label,re as Root,ne as Thumb,le as Track,ae as ValueLabel,T as useColorWheelContext};
