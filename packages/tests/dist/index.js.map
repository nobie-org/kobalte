{"version":3,"sources":["../src/events.ts","../src/utils.ts","../src/mocks.ts"],"names":["vi"],"mappings":";AAAA,SAAS,iBAAiB;;;ACa1B,SAAS,UAAU,WAAW,UAAU;AAEjC,SAAS,sBAAsB;AACrC,YAAU,MAAM;AAEf,OAAG;AAAA,MACF;AAAA,MACA,MAAM,yBAAyB,WAAW;AAAA,QACzC;AAAA,QASA,YAAY,MAAW,MAAW;AACjC,gBAAM,MAAM,IAAI;AAChB,eAAK,QAAQ;AAAA,QACd;AAAA,QAEA,IAAI,cAAc;AACjB,iBAAO,KAAK,MAAM;AAAA,QACnB;AAAA,QAEA,IAAI,YAAY;AACf,iBAAO,KAAK,MAAM;AAAA,QACnB;AAAA,QAEA,IAAI,QAAQ;AACX,iBAAO,KAAK,MAAM;AAAA,QACnB;AAAA,QAEA,IAAI,QAAQ;AACX,iBAAO,KAAK,MAAM;AAAA,QACnB;AAAA,QAEA,IAAI,QAAQ;AACX,iBAAO,KAAK,MAAM;AAAA,QACnB;AAAA,QAEA,IAAI,SAAS;AACZ,iBAAO,KAAK,MAAM;AAAA,QACnB;AAAA,MACD;AAAA,IACD;AAAA,EACD,CAAC;AAED,WAAS,MAAM;AAEd,WAAO,eAAe;AAAA,EACvB,CAAC;AACF;AAEO,SAAS,mBAAmB,MAAW,MAAW;AACxD,QAAM,MAAM,IAAI,MAAM,MAAM,EAAE,SAAS,MAAM,YAAY,KAAK,CAAC;AAC/D,SAAO;AAAA,IACN;AAAA,IACA;AAAA,MACC,SAAS;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,KAAK,UAAU;AAAA,MACvB,OAAO;AAAA,MACP,QAAQ;AAAA,IACT;AAAA,IACA;AAAA,EACD;AACA,SAAO;AACR;;;AD7EA,eAAsB,aACrB,SACA,MACC;AACD;AAAA,IACC;AAAA,IACA,mBAAmB,eAAe;AAAA,MACjC,WAAW;AAAA,MACX,aAAa;AAAA,MACb,GAAG;AAAA,IACJ,CAAC;AAAA,EACF;AACA,QAAM,QAAQ,QAAQ;AAEtB;AAAA,IACC;AAAA,IACA,mBAAmB,aAAa;AAAA,MAC/B,WAAW;AAAA,MACX,aAAa;AAAA,MACb,GAAG;AAAA,IACJ,CAAC;AAAA,EACF;AACA,QAAM,QAAQ,QAAQ;AACvB;;;AE7BA,SAAS,MAAAA,WAAU;AAEZ,SAAS,sBAAsB;AACrC,SAAO,eAAe,QAAQ,cAAc;AAAA,IAC3C,UAAU;AAAA,IACV,OAAOA,IAAG,GAAG,EAAE,mBAAmB,CAAC,WAAW;AAAA,MAC7C,SAAS;AAAA,MACT,OAAO;AAAA,MACP,UAAU;AAAA,MACV,aAAaA,IAAG,GAAG;AAAA;AAAA,MACnB,gBAAgBA,IAAG,GAAG;AAAA;AAAA,MACtB,kBAAkBA,IAAG,GAAG;AAAA,MACxB,qBAAqBA,IAAG,GAAG;AAAA,MAC3B,eAAeA,IAAG,GAAG;AAAA,IACtB,EAAE;AAAA,EACH,CAAC;AACF","sourcesContent":["import { fireEvent } from \"@solidjs/testing-library\";\n\nimport { createPointerEvent } from \"./utils\";\n\n/**\n * Triggers a \"touch\" event on an element.\n */\nexport async function triggerTouch(\n\telement: Document | Element | Window | Node,\n\topts?: any,\n) {\n\tfireEvent(\n\t\telement,\n\t\tcreatePointerEvent(\"pointerdown\", {\n\t\t\tpointerId: 1,\n\t\t\tpointerType: \"touch\",\n\t\t\t...opts,\n\t\t}),\n\t);\n\tawait Promise.resolve();\n\n\tfireEvent(\n\t\telement,\n\t\tcreatePointerEvent(\"pointerup\", {\n\t\t\tpointerId: 1,\n\t\t\tpointerType: \"touch\",\n\t\t\t...opts,\n\t\t}),\n\t);\n\tawait Promise.resolve();\n}\n","/*\n * Portions of this file are based on code from react-spectrum.\n * Copyright 2020 Adobe. All rights reserved.\n *\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\nimport { afterAll, beforeAll, vi } from \"vitest\";\n\nexport function installPointerEvent() {\n\tbeforeAll(() => {\n\t\t// @ts-ignore\n\t\tvi.stubGlobal(\n\t\t\t\"PointerEvent\",\n\t\t\tclass FakePointerEvent extends MouseEvent {\n\t\t\t\t_init: {\n\t\t\t\t\tpageX: number;\n\t\t\t\t\tpageY: number;\n\t\t\t\t\tpointerType: string;\n\t\t\t\t\tpointerId: number;\n\t\t\t\t\twidth: number;\n\t\t\t\t\theight: number;\n\t\t\t\t};\n\n\t\t\t\tconstructor(name: any, init: any) {\n\t\t\t\t\tsuper(name, init);\n\t\t\t\t\tthis._init = init;\n\t\t\t\t}\n\n\t\t\t\tget pointerType() {\n\t\t\t\t\treturn this._init.pointerType;\n\t\t\t\t}\n\n\t\t\t\tget pointerId() {\n\t\t\t\t\treturn this._init.pointerId;\n\t\t\t\t}\n\n\t\t\t\tget pageX() {\n\t\t\t\t\treturn this._init.pageX;\n\t\t\t\t}\n\n\t\t\t\tget pageY() {\n\t\t\t\t\treturn this._init.pageY;\n\t\t\t\t}\n\n\t\t\t\tget width() {\n\t\t\t\t\treturn this._init.width;\n\t\t\t\t}\n\n\t\t\t\tget height() {\n\t\t\t\t\treturn this._init.height;\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t});\n\n\tafterAll(() => {\n\t\t// @ts-ignore\n\t\tglobal.PointerEvent = undefined;\n\t});\n}\n\nexport function createPointerEvent(type: any, opts: any) {\n\tconst evt = new Event(type, { bubbles: true, cancelable: true });\n\tObject.assign(\n\t\tevt,\n\t\t{\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false,\n\t\t\tshiftKey: false,\n\t\t\taltKey: false,\n\t\t\tbutton: opts.button || 0,\n\t\t\twidth: 1,\n\t\t\theight: 1,\n\t\t},\n\t\topts,\n\t);\n\treturn evt;\n}\n","// https://jestjs.io/docs/26.x/manual-mocks#mocking-methods-which-are-not-implemented-in-jsdom\nimport { vi } from \"vitest\";\n\nexport function setupMatchMediaMock() {\n\tObject.defineProperty(window, \"matchMedia\", {\n\t\twritable: true,\n\t\tvalue: vi.fn().mockImplementation((query) => ({\n\t\t\tmatches: false,\n\t\t\tmedia: query,\n\t\t\tonchange: null,\n\t\t\taddListener: vi.fn(), // deprecated\n\t\t\tremoveListener: vi.fn(), // deprecated\n\t\t\taddEventListener: vi.fn(),\n\t\t\tremoveEventListener: vi.fn(),\n\t\t\tdispatchEvent: vi.fn(),\n\t\t})),\n\t});\n}\n"]}